"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[5695],{6186:function(t,n,e){function o(){const t=navigator.userAgent.toLowerCase()||"";let n=navigator.platform.toLowerCase()||"";return n.indexOf("linux")>-1&&t.indexOf("android")>-1&&(n="android"),(n.indexOf("iphone")>-1||n.indexOf("ipad")>-1)&&(n="ios",console.log=function(t){window.webkit.messageHandlers.logger.postMessage(t)}),n}function a(t={}){let n=o()||"";if("android"==n)window.ExtCall.postMessage(t);else{if("ios"!=n)throw new Error(n);window.webkit.messageHandlers.ExtCall.postMessage(t)}}e.d(n,{H6:function(){return d},VU:function(){return u},sX:function(){return i}});const i={openNewWebView:s,replaceSetting:r,goBack:c,toBrowser:l};function s(t=""){const n=JSON.stringify({function:"popWebview",url:t});a(n)}function r(t="",n=""){const e=JSON.stringify({function:"changeProjectSettingURL",userid:t,url:n});a(e)}function l(t=""){const n=JSON.stringify({function:"toBrowser",url:t});a(n)}function c(){const t=JSON.stringify({function:"goBack"});a(t)}const u={lineLogin(t="",n=""){const e=JSON.stringify({function:"lineLogin",channel_id:t,callback:n});a(e)},appleLogin(t=""){const n=JSON.stringify({function:"appleLogin",callback:t});a(n)}},d={startGPS(t=""){const n=JSON.stringify({function:"startGPS",callback:t});a(n)},stopGPS(){const t=JSON.stringify({function:"stopGPS"});a(t)},getCurrentLocation(t=""){const n=JSON.stringify({function:"getCurrentLocation",callback:t});a(n)},getUserLocationHistory(t=""){const n=JSON.stringify({function:"getUserLocationHistory",callback:t});a(n)}}},8019:function(t,n,e){e.d(n,{D:function(){return o}});const o=()=>{const t="input:not(input[type = checkbox], input[type = radio], input[type = file], input[readonly], input[disabled])",n=document.querySelectorAll(t);n.forEach((t=>{t.addEventListener("focus",(()=>{document.body.classList.add("fixfixed")})),t.addEventListener("blur",(()=>{document.body.classList.remove("fixfixed")}))}))}},4988:function(t,n,e){e.d(n,{Cq:function(){return r},Qr:function(){return p},Ux:function(){return c},b$:function(){return s},g7:function(){return g},hB:function(){return f},nN:function(){return l},nV:function(){return h},vL:function(){return d},vW:function(){return y},yv:function(){return w}});e(7658);var o=e(6186),a=e(1830),i=e(4477);const s=t=>"string"==typeof t.message?t.message:"other error",r=t=>{for(let n=0;n<24;n++)t.push({id:n,time:`${n}:00`}),t.push({id:n+1,time:`${n}:30`})},l=()=>{const t=location.href,n=t.split("/"),e=n[n.length-1];return{urlId:e}},c=()=>{const t=location.href,n=t.split("/"),e=n[n.length-2];return{urlId:e}},u=t=>[t.getFullYear(),t.getMonth()+1,t.getDate()],d=t=>t<10?"0"+t:t,p=t=>{let n=JSON.parse(JSON.stringify(t)),e={},o="";return n.forEach((t=>{t.start=new Date(t.start.replace(/-/g,"/")),t.end=new Date(t.end.replace(/-/g,"/")),t.info=u(t.start),e[`${t.info[0]}/${t.info[1]}`]?e[`${t.info[0]}/${t.info[1]}`].push(t.info[2]):e[`${t.info[0]}/${t.info[1]}`]=[t.info[2]]})),o=n[0]?.start.getHours()==n[0]?.end.getHours()?`${n[0]?.start.getHours()}:${d(n[0]?.start.getMinutes())} ~ ${n[0]?.end.getHours()}:${d(n[0]?.end.getMinutes())}(24小時)`:`${n[0]?.start.getHours()}:${d(n[0]?.start.getMinutes())} ~ ${n[0]?.end.getHours()}:${d(n[0]?.end.getMinutes())}`,{newDates:n,info:e,time:o}},f=t=>{let n=JSON.parse(JSON.stringify(t)),e={},o="";return n.forEach((t=>{t.start=new Date(t.start.replace(/-/g,"/")),t.end=new Date(t.end.replace(/-/g,"/")),t.info=u(t.start),e[`${t.info[0]}/${t.info[1]}`]?e[`${t.info[0]}/${t.info[1]}`].push([t.info[2],t.isDone]):e[`${t.info[0]}/${t.info[1]}`]=[[t.info[2],t.isDone]]})),o=n[0]?.start.getHours()==n[0]?.end.getHours()?"全天(24小時)":`${n[0]?.start.getHours()}:${d(n[0]?.start.getMinutes())} ~ ${n[0]?.end.getHours()}:${d(n[0]?.end.getMinutes())}`,{newDates:n,info:e,time:o}},g=t=>{let n=[],e=[],o={},a=[];return t?.length>0&&t.forEach((t=>n.push(t.split("-")))),n.forEach((t=>{let n=`${t[0]}/${t[1]}`;e.push(n),o[n]?o[n].push(t[2]):o[n]=[t[2]]})),e=e.filter(((t,n)=>e.indexOf(t)===n)),1==e.length&&a.push(`${e?.[0]}/${o?.[e?.[0]]?.join("、")}`),e.length>1&&a.push(`${e?.[1]}/${o?.[e?.[1]]?.join("、")}`),{monthInfo:e,dayInfo:o,dateInfo:a}},h=(t,n)=>{let e={};return n.forEach((n=>{let o=parseInt(n.substring(1,3))-1,a=parseInt(n.substring(3,5))-1,i=parseInt(n.substring(5,7))-1;Object.keys(e).includes(t[o].name)||Object.keys(e).includes(t[o].data[a].name)?e[t[o].data[a].name].push(t[o].data[a].data[i]):e[t[o].data[a].name]=[t[o].data[a].data[i]]})),e},w=()=>{try{window.ExtCallStartGPS=()=>!0,o.H6.startGPS("ExtCallStartGPS")}catch(t){}},y=()=>{const t=(0,i.fG)();if(0==t.userPosition.cityId)try{window.ExtCallGetCurrentLocation=async(n,e,o)=>{if("string"===typeof n&&n?.length>6){const n=await(0,a.MP)({longitude:o,latitude:e});console.log("apiGetPosition已發送/"+n.data.defaultPlace.cityName+"/"+n.data.defaultPlace.townName),t.userPosition.cityId=n.data.defaultPlace.cityId,t.userPosition.areaId=n.data.defaultPlace.areaId,t.userPosition.cityId_2=n.data.longTermCare2Place.cityId,t.userPosition.areaId_2=n.data.longTermCare2Place.areaId,console.log(t.userPosition.cityId+"/"+t.userPosition.areaId+"/"+t.userPosition.cityId_2+"/"+t.userPosition.areaId_2)}},o.H6.getCurrentLocation("ExtCallGetCurrentLocation")}catch(n){console.log("電腦版不支援 extCall GPS")}}},5695:function(t,n,e){e.r(n),e.d(n,{default:function(){return V}});e(7658);var o=e(6252),a=e(9963);const i=t=>((0,o.dD)("data-v-09abff94"),t=t(),(0,o.Cn)(),t),s={class:"fullScreen"},r={class:"login"},l=i((()=>(0,o._)("option",{value:""},"選擇要切換到哪個版本?",-1))),c=i((()=>(0,o._)("option",{value:"1",selected:""},"穩定版",-1))),u=i((()=>(0,o._)("option",{value:"2"},"Demo版",-1))),d=[l,c,u],p={class:"login-main"},f={ref:"form"},g={class:"mb-3"},h={class:"mb-3 passwordArea"},w={key:0},y=i((()=>(0,o._)("i",{class:"far fa-eye"},null,-1))),m=[y],b={key:1},k=i((()=>(0,o._)("i",{class:"far fa-eye-slash"},null,-1))),v=[k],_={class:"mt-4b btn-container"},$={class:"row"},S={class:"col"},D={class:"col"},P={class:"login-main2"},L=i((()=>(0,o._)("div",null,".",-1)));function x(t,n,e,i,l,c){return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",r,[(0,o._)("div",{class:"title",onClick:n[0]||(n[0]=t=>i.handleBackDoorOpen(i.inputData))},"會員登入"),i.isBackDoor?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,"onUpdate:modelValue":n[1]||(n[1]=t=>i.inputData.option=t),class:"form-select","aria-label":"Default select example"},d,512)),[[a.bM,i.inputData.option]]):(0,o.kq)("",!0),(0,o._)("div",p,[(0,o._)("form",f,[(0,o._)("div",g,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入手機號碼","onUpdate:modelValue":n[2]||(n[2]=t=>i.inputData.phoneNumber=t),title:"請輸入手機號碼",required:""},null,512),[[a.nr,i.inputData.phoneNumber]])]),(0,o._)("div",h,[0==i.isShowPassword?((0,o.wg)(),(0,o.iD)("div",w,[(0,o.wy)((0,o._)("input",{type:"password",class:"form-control",placeholder:"請輸入密碼","onUpdate:modelValue":n[3]||(n[3]=t=>i.inputData.password=t),pattern:"^(?=.*[A-Za-z])(?=.*[0-9]).{6,}$",title:"最少6個字元，需有英文及數字",required:""},null,512),[[a.nr,i.inputData.password]]),(0,o._)("a",{class:"nav-link",onClick:n[4]||(n[4]=(...t)=>i.showPassword&&i.showPassword(...t))},m)])):(0,o.kq)("",!0),1==i.isShowPassword?((0,o.wg)(),(0,o.iD)("div",b,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入密碼","onUpdate:modelValue":n[5]||(n[5]=t=>i.inputData.password=t),pattern:"^(?=.*[A-Za-z])(?=.*[0-9]).{6,}$",title:"最少6個字元，需有英文及數字",required:""},null,512),[[a.nr,i.inputData.password]]),(0,o._)("a",{class:"nav-link",onClick:n[6]||(n[6]=(...t)=>i.showPassword&&i.showPassword(...t))},v)])):(0,o.kq)("",!0)])],512),(0,o._)("div",_,[(0,o._)("div",$,[(0,o._)("div",S,[(0,o._)("button",{class:"btn btn-primary",type:"button",onClick:n[7]||(n[7]=(0,a.iM)(((...t)=>i.login&&i.login(...t)),["prevent"]))}," 登入 ")]),(0,o._)("div",D,[(0,o._)("button",{class:"btn btn-outline-primary",type:"button",onClick:n[8]||(n[8]=n=>t.$router.push({path:"/signup"}))}," 註冊 ")])])])]),(0,o._)("div",P,[(0,o._)("div",{onClick:n[9]||(n[9]=n=>t.$router.push({path:"/home"}))},"訪客登入"),L,(0,o._)("div",{onClick:n[10]||(n[10]=n=>t.$router.push({path:"/login/forget"}))},"忘記密碼")])])])}var C=e(2262),N=e(2201),I=e(1557),O=e(4988),H=e(1830),J=e(8019),E=e(6186),G={setup(){const t=(0,N.tv)(),n="pink",e=(0,C.iH)({phoneNumber:"",password:"",option:""});let a="";const i=(0,C.iH)(null);(0,o.bv)((()=>{(0,J.D)(),1==localStorage.getItem("is_Login")&&t.push({path:"/home"})}));const s=async t=>{t.preventDefault(),i.value.reportValidity()&&(a=await(0,H.cL)(e.value),r(a.status))},r=n=>{if(1==n)(0,I.FN)("登入成功"),localStorage.setItem("is_Login",1),t.push({path:"/home"});else{let t=(0,O.b$)(a);(0,I.FN)(t)}},l="53971074",c=(0,C.iH)(!1),u=t=>{const{password:n,option:e}=t;n===l&&(c.value=!0);try{if("2"===e){const t="https://dl.dropboxusercontent.com/s/4a5wlqpsbc75p2m/settings_nubkcaretaker.txt";E.sX.replaceSetting("test",t)}if("1"===e){const t="https://dl.dropboxusercontent.com/s/ypjxtzw965j303o/settings_nubkcaretaker.txt";E.sX.replaceSetting("index",t)}if("3"===e){const t="http://10.1.1.168/nubk_setting/settings_nubkemployer.txt";E.sX.replaceSetting("index",t)}}catch(o){(0,I.FN)(`電腦版不能執行 ${o}`)}};let d=(0,C.iH)(0);const p=()=>{d.value=0==d.value?1:0},f=()=>{let t="";window.appleLogin=n=>{t=JSON.parse(n),alert(t.token)},E.VU.appleLogin("appleLogin"),console.log("appleLoginTest")},g=()=>{try{const n="1655750341";window.lineLogin=async n=>{if(n=JSON.parse(n),"cancel"===n.status)return void(0,I.FN)("失敗!");const e=await(0,H.jn)({access_token:n.token});if(e.status){const t=await(0,H.GI)({access_token:n.token});r(t.status)}else n&&t.push(`/signup?line_access_token=${n.token}&line_name=${e.data.name}`)},E.VU.lineLogin(n,"lineLogin")}catch(n){console.log(n.message)}};return{inputData:e,login:s,form:i,handleBackDoorOpen:u,isBackDoor:c,backDoor:l,showPassword:p,isShowPassword:d,model:n,lineLogin:g,appleLoginTest:f}}},M=e(3744);const U=(0,M.Z)(G,[["render",x],["__scopeId","data-v-09abff94"]]);var V=U}}]);
//# sourceMappingURL=5695.d2ea8934.js.map
"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[9721],{622:function(e,t,n){n.d(t,{o:function(){return i}});var o=n(2262),s=n(9876);const a={setItem(e,t){localStorage.setItem(e,t)},getItem(e){const t=localStorage.getItem(e)||"";return t}},i=(0,s.Q_)("smsCoolDown",(()=>{let e=(0,o.iH)(""),t=null,n=(0,o.iH)(!0);const s=60;function i(){a.setItem("smsSendDate",new Date)}function r(){a.setItem("currentTime",new Date)}function l(){clearInterval(t)}function u(){const{before:e,after:t}=d();return Math.floor((t-e)/1e3)}function c(){let e=a.getItem("smsSendDate");e||a.setItem("smsSendDate",new Date("2000/01/01")),r()}function d(){let e=a.getItem("smsSendDate"),t=a.getItem("currentTime");return{after:new Date(t).getTime(),before:new Date(e).getTime()}}function f(){l(),n.value=!0,e.value=""}function p(){return 60-e.value<60&&60-e.value>=0?60-e.value:""}function w(){!0===n.value&&(t=setInterval((()=>{u()>=s?(e.value="",n.value=!0,l()):(r(),e.value=u(),n.value=!1)}),1e3))}return{setCountDown:w,showText:p,isSmsCoolDownOk:n,smsSendDate:i,handleRouterLeave:f,init:c}}))},6186:function(e,t,n){function o(){const e=navigator.userAgent.toLowerCase()||"";let t=navigator.platform.toLowerCase()||"";return t.indexOf("linux")>-1&&e.indexOf("android")>-1&&(t="android"),(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1)&&(t="ios",console.log=function(e){window.webkit.messageHandlers.logger.postMessage(e)}),t}function s(e={}){let t=o()||"";if("android"==t)window.ExtCall.postMessage(e);else{if("ios"!=t)throw new Error(t);window.webkit.messageHandlers.ExtCall.postMessage(e)}}n.d(t,{H6:function(){return d},VU:function(){return c},sX:function(){return a}});const a={openNewWebView:i,replaceSetting:r,goBack:u,toBrowser:l};function i(e=""){const t=JSON.stringify({function:"popWebview",url:e});s(t)}function r(e="",t=""){const n=JSON.stringify({function:"changeProjectSettingURL",userid:e,url:t});s(n)}function l(e=""){const t=JSON.stringify({function:"toBrowser",url:e});s(t)}function u(){const e=JSON.stringify({function:"goBack"});s(e)}const c={lineLogin(e="",t=""){const n=JSON.stringify({function:"lineLogin",channel_id:e,callback:t});s(n)},appleLogin(e=""){const t=JSON.stringify({function:"appleLogin",callback:e});s(t)}},d={startGPS(e=""){const t=JSON.stringify({function:"startGPS",callback:e});s(t)},stopGPS(){const e=JSON.stringify({function:"stopGPS"});s(e)},getCurrentLocation(e=""){const t=JSON.stringify({function:"getCurrentLocation",callback:e});s(t)},getUserLocationHistory(e=""){const t=JSON.stringify({function:"getUserLocationHistory",callback:e});s(t)}}},8019:function(e,t,n){n.d(t,{D:function(){return o}});const o=()=>{const e="input:not(input[type = checkbox], input[type = radio], input[type = file], input[readonly], input[disabled])",t=document.querySelectorAll(e);t.forEach((e=>{e.addEventListener("focus",(()=>{document.body.classList.add("fixfixed")})),e.addEventListener("blur",(()=>{document.body.classList.remove("fixfixed")}))}))}},4988:function(e,t,n){n.d(t,{Cq:function(){return r},Qr:function(){return f},Ux:function(){return u},b$:function(){return i},g7:function(){return w},hB:function(){return p},nN:function(){return l},nV:function(){return g},vL:function(){return d},vW:function(){return h},yv:function(){return y}});n(7658);var o=n(6186),s=n(1830),a=n(4477);const i=e=>"string"==typeof e.message?e.message:"other error",r=e=>{for(let t=0;t<24;t++)e.push({id:t,time:`${t}:00`}),e.push({id:t+1,time:`${t}:30`})},l=()=>{const e=location.href,t=e.split("/"),n=t[t.length-1];return{urlId:n}},u=()=>{const e=location.href,t=e.split("/"),n=t[t.length-2];return{urlId:n}},c=e=>[e.getFullYear(),e.getMonth()+1,e.getDate()],d=e=>e<10?"0"+e:e,f=e=>{let t=JSON.parse(JSON.stringify(e)),n={},o="";return t.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=c(e.start),n[`${e.info[0]}/${e.info[1]}`]?n[`${e.info[0]}/${e.info[1]}`].push(e.info[2]):n[`${e.info[0]}/${e.info[1]}`]=[e.info[2]]})),o=t[0]?.start.getHours()==t[0]?.end.getHours()?`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}(24小時)`:`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}`,{newDates:t,info:n,time:o}},p=e=>{let t=JSON.parse(JSON.stringify(e)),n={},o="";return t.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=c(e.start),n[`${e.info[0]}/${e.info[1]}`]?n[`${e.info[0]}/${e.info[1]}`].push([e.info[2],e.isDone]):n[`${e.info[0]}/${e.info[1]}`]=[[e.info[2],e.isDone]]})),o=t[0]?.start.getHours()==t[0]?.end.getHours()?"全天(24小時)":`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}`,{newDates:t,info:n,time:o}},w=e=>{let t=[],n=[],o={},s=[];return e?.length>0&&e.forEach((e=>t.push(e.split("-")))),t.forEach((e=>{let t=`${e[0]}/${e[1]}`;n.push(t),o[t]?o[t].push(e[2]):o[t]=[e[2]]})),n=n.filter(((e,t)=>n.indexOf(e)===t)),1==n.length&&s.push(`${n?.[0]}/${o?.[n?.[0]]?.join("、")}`),n.length>1&&s.push(`${n?.[1]}/${o?.[n?.[1]]?.join("、")}`),{monthInfo:n,dayInfo:o,dateInfo:s}},g=(e,t)=>{let n={};return t.forEach((t=>{let o=parseInt(t.substring(1,3))-1,s=parseInt(t.substring(3,5))-1,a=parseInt(t.substring(5,7))-1;Object.keys(n).includes(e[o].name)||Object.keys(n).includes(e[o].data[s].name)?n[e[o].data[s].name].push(e[o].data[s].data[a]):n[e[o].data[s].name]=[e[o].data[s].data[a]]})),n},y=()=>{try{window.ExtCallStartGPS=()=>!0,o.H6.startGPS("ExtCallStartGPS")}catch(e){}},h=()=>{const e=(0,a.fG)();if(0==e.userPosition.cityId)try{window.ExtCallGetCurrentLocation=async(t,n,o)=>{if("string"===typeof t&&t?.length>6){const t=await(0,s.MP)({longitude:o,latitude:n});console.log("apiGetPosition已發送/"+t.data.defaultPlace.cityName+"/"+t.data.defaultPlace.townName),e.userPosition.cityId=t.data.defaultPlace.cityId,e.userPosition.areaId=t.data.defaultPlace.areaId,e.userPosition.cityId_2=t.data.longTermCare2Place.cityId,e.userPosition.areaId_2=t.data.longTermCare2Place.areaId,console.log(e.userPosition.cityId+"/"+e.userPosition.areaId+"/"+e.userPosition.cityId_2+"/"+e.userPosition.areaId_2)}},o.H6.getCurrentLocation("ExtCallGetCurrentLocation")}catch(t){console.log("電腦版不支援 extCall GPS")}}},9721:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});n(7658);var o=n(6252),s=n(3577),a=n(9963);const i=e=>((0,o.dD)("data-v-27486e24"),e=e(),(0,o.Cn)(),e),r={class:"fullScreen"},l={class:"signup"},u=i((()=>(0,o._)("div",{class:"title"},"會員註冊",-1))),c={class:"signup-main"},d={key:0},f={ref:"form"},p={class:"mb-3"},w={key:1,class:"mb-3"},g={ref:"form2"},y={key:0,class:"mb-3 passwordArea"},h={key:0},m=i((()=>(0,o._)("i",{class:"far fa-eye"},null,-1))),v=[m],k={key:1},b=i((()=>(0,o._)("i",{class:"far fa-eye-slash"},null,-1))),S=[b],D={key:2,class:"mb-3 passwordArea"},_={key:0},P=i((()=>(0,o._)("i",{class:"far fa-eye"},null,-1))),$=[P],C={key:1},I=i((()=>(0,o._)("i",{class:"far fa-eye-slash"},null,-1))),x=[I],N={class:"mt-4b btn-container"},H={class:"row"},O={key:0,class:"col"},V={key:1,class:"col"},q={key:0,class:"btn btn-primary",type:"button",style:{"background-color":"#BFBFBF",border:"0px"}},L={key:2,class:"col"},E={class:"login-main2"},J=i((()=>(0,o._)("div",null,".",-1)));function M(e,t,n,i,m,b){return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",l,[u,(0,o._)("div",c,[i.line_name?((0,o.wg)(),(0,o.iD)("div",d,"hi! "+(0,s.zw)(i.line_name)+"， 您目前正以line方式註冊",1)):(0,o.kq)("",!0),(0,o._)("form",f,[(0,o._)("div",p,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入手機號碼","onUpdate:modelValue":t[0]||(t[0]=e=>i.inputData.phoneNumber=e),pattern:"^09\\d{2}?\\d{3}?\\d{3}$",title:"請輸入手機號碼",required:""},null,512),[[a.nr,i.inputData.phoneNumber]])])],512),i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",w,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入驗證碼","onUpdate:modelValue":t[1]||(t[1]=e=>i.inputData.verifyCode=e)},null,512),[[a.nr,i.inputData.verifyCode]])])):(0,o.kq)("",!0),(0,o._)("form",g,[i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",y,[0==i.isShowPassword?((0,o.wg)(),(0,o.iD)("div",h,[(0,o.wy)((0,o._)("input",{type:"password",class:"form-control",placeholder:"請輸入密碼","onUpdate:modelValue":t[2]||(t[2]=e=>i.inputData.password=e),pattern:"^(?=.*[A-Za-z])(?=.*[0-9]).{6,}$",title:"最少6個字元，需有英文及數字",required:""},null,512),[[a.nr,i.inputData.password]]),(0,o._)("a",{class:"nav-link",onClick:t[3]||(t[3]=(...e)=>i.showPassword&&i.showPassword(...e))},v)])):(0,o.kq)("",!0),1==i.isShowPassword?((0,o.wg)(),(0,o.iD)("div",k,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入密碼","onUpdate:modelValue":t[4]||(t[4]=e=>i.inputData.password=e),pattern:"^(?=.*[A-Za-z])(?=.*[0-9]).{6,}$",title:"最少6個字元，需有英文及數字",required:""},null,512),[[a.nr,i.inputData.password]]),(0,o._)("a",{class:"nav-link",onClick:t[5]||(t[5]=(...e)=>i.showPassword&&i.showPassword(...e))},S)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)],512),i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",D,[0==i.isShowPassword2?((0,o.wg)(),(0,o.iD)("div",_,[(0,o.wy)((0,o._)("input",{type:"password",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>i.password2=e),placeholder:"請再次確認密碼",required:""},null,512),[[a.nr,i.password2]]),(0,o._)("a",{class:"nav-link",onClick:t[7]||(t[7]=(...e)=>i.showPassword2&&i.showPassword2(...e))},$)])):(0,o.kq)("",!0),1==i.isShowPassword2?((0,o.wg)(),(0,o.iD)("div",C,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>i.password2=e),placeholder:"請再次確認密碼",required:""},null,512),[[a.nr,i.password2]]),(0,o._)("a",{class:"nav-link",onClick:t[9]||(t[9]=(...e)=>i.showPassword2&&i.showPassword2(...e))},x)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("div",N,[(0,o._)("div",H,[i.isSendVerify?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("button",{class:"btn btn-primary",type:"button",onClick:t[10]||(t[10]=(0,a.iM)((e=>i.sendVerify(e)),["prevent"]))},"發送驗證碼")])),i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",V,[i.showSendOtpBtn?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",q,(0,s.zw)(`請稍後${i.showText()}秒`),1)),i.showSendOtpBtn?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn btn-primary",type:"button",onClick:t[11]||(t[11]=e=>i.sendVerify2(e))},"重新發送")):(0,o.kq)("",!0)])):(0,o.kq)("",!0),i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",L,[(0,o._)("button",{class:"btn btn-primary",type:"button",onClick:t[12]||(t[12]=e=>i.register(e))},"加入會員")])):(0,o.kq)("",!0)])]),(0,o._)("div",E,[(0,o._)("div",{onClick:t[13]||(t[13]=t=>e.$router.push({path:"/home"}))},"訪客登入"),J,(0,o._)("div",{onClick:t[14]||(t[14]=t=>e.$router.push({path:"/"}))},"回登入頁")])])])])}var G=n(2262),B=n(2201),F=n(1557),T=n(4988),U=n(1830),j=n(622),A=n(9876),z=n(8019),R={setup(){const e=(0,j.o)(),{showText:t,setCountDown:n,smsSendDate:s,handleRouterLeave:a,init:i}=e,{isSmsCoolDownOk:r}=(0,A.Jk)(e),l=(0,o.Fl)((()=>!t())),u=(0,G.iH)(""),c=()=>{const e=(0,B.yj)(),{line_access_token:t}=e.query;t&&(u.value=e.query.line_name,p.value.line_access_token=t)},d=async()=>{if(!1!==r.value){const e=await(0,U.Rs)({phoneNumber:p.value.phoneNumber});if(1==e.status)(0,F.FN)("驗證碼已發送"),g.value=!0,s(),n();else{const t=(0,T.b$)(e);(0,F.FN)(t)}}else alert("簡訊功能冷卻中")};(0,o.bv)((()=>{c(),(0,z.D)(),i(),n()})),(0,B.iS)(((e,t,n)=>{a(),n()}));const f=(0,B.tv)(),p=(0,G.iH)({phoneNumber:"",password:"",verifyCode:"",roleType:"caretaker",line_access_token:""}),w=(0,G.iH)(""),g=(0,G.iH)(!1),y=(0,G.iH)(null),h=(0,G.iH)(null);let m="";const v=async e=>{e.preventDefault(),y.value.reportValidity()&&d()},k=async e=>{e.preventDefault(),y.value.reportValidity()&&d()},b=async e=>{if(e.preventDefault(),h.value.reportValidity())if(p.value.password!=w.value)(0,F.FN)("密碼不相符，請確認");else if(m=await(0,U.Fu)(p.value),1==m.status)(0,F.FN)("加入會員成功"),f.push({path:"/"});else{const e=(0,T.b$)(m);(0,F.FN)(e)}};let S=(0,G.iH)(0),D=(0,G.iH)(0);const _=()=>{S.value=0==S.value?1:0},P=()=>{D.value=0==D.value?1:0};return{showText:t,showSendOtpBtn:l,inputData:p,form:y,form2:h,register:b,isSendVerify:g,sendVerify:v,sendVerify2:k,password2:w,isShowPassword:S,showPassword:_,isShowPassword2:D,showPassword2:P,line_name:u}}},W=n(3744);const Z=(0,W.Z)(R,[["render",M],["__scopeId","data-v-27486e24"]]);var Q=Z}}]);
//# sourceMappingURL=9721.829b7968.js.map
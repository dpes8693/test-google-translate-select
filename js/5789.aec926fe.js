"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[5789],{6186:function(e,t,a){function n(){const e=navigator.userAgent.toLowerCase()||"";let t=navigator.platform.toLowerCase()||"";return t.indexOf("linux")>-1&&e.indexOf("android")>-1&&(t="android"),(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1)&&(t="ios",console.log=function(e){window.webkit.messageHandlers.logger.postMessage(e)}),t}function l(e={}){let t=n()||"";if("android"==t)window.ExtCall.postMessage(e);else{if("ios"!=t)throw new Error(t);window.webkit.messageHandlers.ExtCall.postMessage(e)}}a.d(t,{H6:function(){return d},VU:function(){return u},sX:function(){return s}});const s={openNewWebView:o,replaceSetting:r,goBack:c,toBrowser:i};function o(e=""){const t=JSON.stringify({function:"popWebview",url:e});l(t)}function r(e="",t=""){const a=JSON.stringify({function:"changeProjectSettingURL",userid:e,url:t});l(a)}function i(e=""){const t=JSON.stringify({function:"toBrowser",url:e});l(t)}function c(){const e=JSON.stringify({function:"goBack"});l(e)}const u={lineLogin(e="",t=""){const a=JSON.stringify({function:"lineLogin",channel_id:e,callback:t});l(a)},appleLogin(e=""){const t=JSON.stringify({function:"appleLogin",callback:e});l(t)}},d={startGPS(e=""){const t=JSON.stringify({function:"startGPS",callback:e});l(t)},stopGPS(){const e=JSON.stringify({function:"stopGPS"});l(e)},getCurrentLocation(e=""){const t=JSON.stringify({function:"getCurrentLocation",callback:e});l(t)},getUserLocationHistory(e=""){const t=JSON.stringify({function:"getUserLocationHistory",callback:e});l(t)}}},4988:function(e,t,a){a.d(t,{Cq:function(){return r},Qr:function(){return p},Ux:function(){return c},b$:function(){return o},g7:function(){return m},hB:function(){return f},nN:function(){return i},nV:function(){return v},vL:function(){return d},vW:function(){return _},yv:function(){return g}});a(7658);var n=a(6186),l=a(1830),s=a(4477);const o=e=>"string"==typeof e.message?e.message:"other error",r=e=>{for(let t=0;t<24;t++)e.push({id:t,time:`${t}:00`}),e.push({id:t+1,time:`${t}:30`})},i=()=>{const e=location.href,t=e.split("/"),a=t[t.length-1];return{urlId:a}},c=()=>{const e=location.href,t=e.split("/"),a=t[t.length-2];return{urlId:a}},u=e=>[e.getFullYear(),e.getMonth()+1,e.getDate()],d=e=>e<10?"0"+e:e,p=e=>{let t=JSON.parse(JSON.stringify(e)),a={},n="";return t.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=u(e.start),a[`${e.info[0]}/${e.info[1]}`]?a[`${e.info[0]}/${e.info[1]}`].push(e.info[2]):a[`${e.info[0]}/${e.info[1]}`]=[e.info[2]]})),n=t[0]?.start.getHours()==t[0]?.end.getHours()?`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}(24小時)`:`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}`,{newDates:t,info:a,time:n}},f=e=>{let t=JSON.parse(JSON.stringify(e)),a={},n="";return t.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=u(e.start),a[`${e.info[0]}/${e.info[1]}`]?a[`${e.info[0]}/${e.info[1]}`].push([e.info[2],e.isDone]):a[`${e.info[0]}/${e.info[1]}`]=[[e.info[2],e.isDone]]})),n=t[0]?.start.getHours()==t[0]?.end.getHours()?"全天(24小時)":`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}`,{newDates:t,info:a,time:n}},m=e=>{let t=[],a=[],n={},l=[];return e?.length>0&&e.forEach((e=>t.push(e.split("-")))),t.forEach((e=>{let t=`${e[0]}/${e[1]}`;a.push(t),n[t]?n[t].push(e[2]):n[t]=[e[2]]})),a=a.filter(((e,t)=>a.indexOf(e)===t)),1==a.length&&l.push(`${a?.[0]}/${n?.[a?.[0]]?.join("、")}`),a.length>1&&l.push(`${a?.[1]}/${n?.[a?.[1]]?.join("、")}`),{monthInfo:a,dayInfo:n,dateInfo:l}},v=(e,t)=>{let a={};return t.forEach((t=>{let n=parseInt(t.substring(1,3))-1,l=parseInt(t.substring(3,5))-1,s=parseInt(t.substring(5,7))-1;Object.keys(a).includes(e[n].name)||Object.keys(a).includes(e[n].data[l].name)?a[e[n].data[l].name].push(e[n].data[l].data[s]):a[e[n].data[l].name]=[e[n].data[l].data[s]]})),a},g=()=>{try{window.ExtCallStartGPS=()=>!0,n.H6.startGPS("ExtCallStartGPS")}catch(e){}},_=()=>{const e=(0,s.fG)();if(0==e.userPosition.cityId)try{window.ExtCallGetCurrentLocation=async(t,a,n)=>{if("string"===typeof t&&t?.length>6){const t=await(0,l.MP)({longitude:n,latitude:a});console.log("apiGetPosition已發送/"+t.data.defaultPlace.cityName+"/"+t.data.defaultPlace.townName),e.userPosition.cityId=t.data.defaultPlace.cityId,e.userPosition.areaId=t.data.defaultPlace.areaId,e.userPosition.cityId_2=t.data.longTermCare2Place.cityId,e.userPosition.areaId_2=t.data.longTermCare2Place.areaId,console.log(e.userPosition.cityId+"/"+e.userPosition.areaId+"/"+e.userPosition.cityId_2+"/"+e.userPosition.areaId_2)}},n.H6.getCurrentLocation("ExtCallGetCurrentLocation")}catch(t){console.log("電腦版不支援 extCall GPS")}}},179:function(e,t,a){a.d(t,{Z:function(){return y}});var n=a(6252),l=a(3577),s=a(9963);const o={class:"input-group"},r=(0,n._)("option",{value:"undefined",disabled:""},"請選擇縣市",-1),i=["value"],c=(0,n._)("option",{value:"undefined",disabled:""},"請選擇鄉鎮區",-1),u=["value"];function d(e,t,a,d,p,f){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.wy)((0,n._)("select",{class:"col form-control form-select","onUpdate:modelValue":t[0]||(t[0]=e=>d.cityIdx=e)},[r,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.cityAreaData,(e=>((0,n.wg)(),(0,n.iD)("option",{value:e.id,key:e.id},(0,l.zw)(e.city_name),9,i)))),128))],512),[[s.bM,d.cityIdx]]),(0,n.wy)((0,n._)("select",{class:"col form-control form-select","onUpdate:modelValue":t[1]||(t[1]=e=>d.areaIdx=e)},[c,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.areaList,(e=>((0,n.wg)(),(0,n.iD)("option",{value:e.id,key:e.id},(0,l.zw)(e.area_name),9,u)))),128))],512),[[s.bM,d.areaIdx]])])}var p=a(2262),f=a(1830),m=a(4477),v={props:{cityIdx_p:Number||String||void 0,areaIdx_p:Number||String||void 0},setup(e,{emit:t}){const a=(0,m.ce)();let l=(0,p.iH)([]),s=(0,p.iH)(e.cityIdx_p),o=(0,p.iH)(e.areaIdx_p),r=((0,p.iH)([]),(0,p.iH)([]));const i=()=>{t("cityIdx",s)},c=()=>{t("areaIdx",o)};return(0,n.bv)((async()=>{void 0==a.cityAreaList?(l.value=await(0,f.t3)(),l.value=l.value.data,a.cityAreaList=l.value):l.value=a.cityAreaList,void 0!=s.value&&(r.value=l.value[s.value-1].areas)})),(0,n.YP)((()=>s.value),(async()=>{r.value=l?.value?.[s.value-1]?.areas,i()})),(0,n.YP)((()=>o.value),(async()=>{c()})),(0,n.YP)((()=>e.cityIdx_p),(async()=>{s.value=e.cityIdx_p})),(0,n.YP)((()=>e.areaIdx_p),(async()=>{o.value=e.areaIdx_p})),{cityAreaData:l,areaList:r,cityIdx:s,areaIdx:o}}},g=a(3744);const _=(0,g.Z)(v,[["render",d]]);var y=_},5765:function(e,t,a){a.d(t,{Z:function(){return y}});var n=a(6252),l=a(3577);const s=e=>((0,n.dD)("data-v-7303a0ce"),e=e(),(0,n.Cn)(),e),o={class:"c-header c-header-3"},r={class:"navbar ui-navbar"},i={class:"navbar-nav"},c={class:"nav-link"},u=s((()=>(0,n._)("h1",{class:"navbar-brand"},null,-1))),d=s((()=>(0,n._)("ul",{class:"navbar-nav"},[(0,n._)("li",{class:"nav-item"},[(0,n._)("a",{href:"javascript:void(0);",class:"nav-link"})])],-1)));function p(e,t,a,s,p,f){return(0,n.wg)(),(0,n.iD)("header",o,[(0,n._)("nav",r,[(0,n._)("ul",i,[(0,n._)("li",{class:"nav-item",onClick:t[0]||(t[0]=(...e)=>s.btnClick&&s.btnClick(...e))},[(0,n._)("a",c,[(0,n._)("i",{class:(0,l.C_)(s.iconCode)},null,2),(0,n.Uk)((0,l.zw)(s.text),1)])])]),u,d])])}a(7658);var f=a(2201),m=a(4477),v={props:{left:String,path:String,clickFun:Function},setup(e){const t=(0,m.s6)(),a=t.goto,n=(0,f.tv)();let l="",s="";const o=e.left?e.left:"";"chevronArrow"==o?l="fa fa-chevron-left":(l="far fa-arrow-left",s="上一步");const r=()=>{if("-1"==e.path)try{a("back")}catch(t){console.log(t),n.back()}else e.path?n.push({path:e.path}):e.clickFun?e.clickFun():n.push({path:"/home"})};return{iconCode:l,text:s,btnClick:r}}},g=a(3744);const _=(0,g.Z)(v,[["render",p],["__scopeId","data-v-7303a0ce"]]);var y=_},5789:function(e,t,a){a.r(t),a.d(t,{default:function(){return le}});var n=a(6252),l=a(9963),s=a(3577);const o=e=>((0,n.dD)("data-v-622ece2b"),e=e(),(0,n.Cn)(),e),r={class:"newCourse"},i=o((()=>(0,n._)("div",{class:"title"},[(0,n._)("p",null,"我要報名")],-1))),c=o((()=>(0,n._)("hr",null,null,-1))),u={ref:"form"},d={class:"main1"},p={class:"mb-3"},f=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("請選擇班別"),(0,n._)("span",{class:"star"},"*")],-1))),m={class:"input-list"},v=["value","id"],g=["for"],_={class:"mb-3"},y=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("姓名"),(0,n._)("span",{class:"star"},"*")],-1))),b={class:"mb-3"},h=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("性別"),(0,n._)("span",{class:"star"},"*")],-1))),w={class:"input-group"},I={class:"col form-check"},k=o((()=>(0,n._)("label",{class:"form-check-label",for:"Male"},"男性",-1))),D={class:"col form-check"},x=o((()=>(0,n._)("label",{class:"form-check-label",for:"Female"},"女性",-1))),C={class:"mb-3"},$=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("出生日期"),(0,n._)("span",{class:"star"},"*")],-1))),U={class:"mb-3"},H=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("電話"),(0,n._)("span",{class:"star"},"*")],-1))),S={class:"mb-3"},N=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("手機號碼"),(0,n._)("span",{class:"star"},"*")],-1))),P={class:"mb-3"},L=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("電子信箱"),(0,n._)("span",{class:"star"},"*")],-1))),O={class:"mb-3"},V=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("通訊地址"),(0,n._)("span",{class:"star"},"*")],-1))),M={class:"mb-3"},G=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("緊急聯絡人"),(0,n._)("span",{class:"star"},"*")],-1))),J={class:"mb-3"},q=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("緊急聯絡人關係"),(0,n._)("span",{class:"star"},"*")],-1))),E={class:"mb-3"},F=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("緊急聯絡人電話"),(0,n._)("span",{class:"star"},"*")],-1))),A={class:"mb-3"},Y=o((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("緊急聯絡人手機號碼"),(0,n._)("span",{class:"star"},"*")],-1))),Z={class:"mt-4b btn-container"},j={class:"row"},B={class:"col"};function W(e,t,a,o,W,z){const K=(0,n.up)("Header"),T=(0,n.up)("CitySelecter");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(K,{title:"課程內容",path:"-1"}),(0,n._)("div",r,[i,c,(0,n._)("form",u,[(0,n._)("div",d,[(0,n._)("div",p,[f,(0,n._)("div",m,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.classList,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"form-check-inline",key:e.id},[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",value:e.id,id:e.id,"onUpdate:modelValue":t[0]||(t[0]=e=>o.postData.courseClassId=e),required:""},null,8,v),[[l.G2,o.postData.courseClassId]]),(0,n._)("label",{class:"form-check-label",for:e.id},(0,s.zw)(e.name),9,g)])))),128))])]),(0,n._)("div",_,[y,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入姓名","onUpdate:modelValue":t[1]||(t[1]=e=>o.postData.name=e),required:""},null,512),[[l.nr,o.postData.name]])]),(0,n._)("div",b,[h,(0,n._)("div",w,[(0,n._)("div",I,[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",id:"Male",value:"Male","onUpdate:modelValue":t[2]||(t[2]=e=>o.postData.gender=e)},null,512),[[l.G2,o.postData.gender]]),k]),(0,n._)("div",D,[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",id:"Female",value:"Female","onUpdate:modelValue":t[3]||(t[3]=e=>o.postData.gender=e)},null,512),[[l.G2,o.postData.gender]]),x])])]),(0,n._)("div",C,[$,(0,n.wy)((0,n._)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>o.postData.birthday=e),required:""},null,512),[[l.nr,o.postData.birthday]])]),(0,n._)("div",U,[H,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入電話","onUpdate:modelValue":t[5]||(t[5]=e=>o.postData.phoneNumber=e),required:""},null,512),[[l.nr,o.postData.phoneNumber]])]),(0,n._)("div",S,[N,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入手機號碼","onUpdate:modelValue":t[6]||(t[6]=e=>o.postData.telephone=e),pattern:"^09\\d{2}?\\d{3}?\\d{3}$",required:""},null,512),[[l.nr,o.postData.telephone]])]),(0,n._)("div",P,[L,(0,n.wy)((0,n._)("input",{type:"email",class:"form-control",placeholder:"請輸入電子信箱","onUpdate:modelValue":t[7]||(t[7]=e=>o.postData.mail=e),required:""},null,512),[[l.nr,o.postData.mail]])]),(0,n._)("div",O,[V,(0,n.Wm)(T,{onCityIdx:o.updateCityIdx,onAreaIdx:o.updateAreaIdx},null,8,["onCityIdx","onAreaIdx"]),(0,n.wy)((0,n._)("input",{type:"text",class:"form-control mt-3",placeholder:"請輸入其他地址","onUpdate:modelValue":t[8]||(t[8]=e=>o.postData.address=e)},null,512),[[l.nr,o.postData.address]])]),(0,n._)("div",M,[G,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入緊急聯絡人","onUpdate:modelValue":t[9]||(t[9]=e=>o.postData.connect.name=e),required:""},null,512),[[l.nr,o.postData.connect.name]])]),(0,n._)("div",J,[q,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入緊急聯絡人關係","onUpdate:modelValue":t[10]||(t[10]=e=>o.postData.connect.relationship=e),required:""},null,512),[[l.nr,o.postData.connect.relationship]])]),(0,n._)("div",E,[F,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入緊急聯絡人電話","onUpdate:modelValue":t[11]||(t[11]=e=>o.postData.connect.phoneNumber=e),required:""},null,512),[[l.nr,o.postData.connect.phoneNumber]])]),(0,n._)("div",A,[Y,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入緊急聯絡人手機號碼","onUpdate:modelValue":t[12]||(t[12]=e=>o.postData.connect.telephone=e),pattern:"^09\\d{2}?\\d{3}?\\d{3}$",required:""},null,512),[[l.nr,o.postData.connect.telephone]])]),(0,n._)("div",Z,[(0,n._)("div",j,[(0,n._)("div",B,[(0,n._)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[13]||(t[13]=(...e)=>o.save&&o.save(...e))},"完成報名")])])])])],512)])],64)}a(7658);var z=a(5765),K=a(179),T=a(2262),Q=a(1830),R=a(2201),X=a(4988),ee=a(1557),te={setup(){const e=(0,R.tv)();let t=(0,T.iH)([]),a=(0,X.nN)().urlId,l=(0,T.iH)(),s=(0,T.iH)({courseId:a,courseClassId:null,name:null,gender:"Male",birthday:null,phoneNumber:null,telephone:null,mail:null,cityId:null,areaId:null,address:null,connect:{name:null,relationship:null,phoneNumber:null,telephone:null}});(0,n.bv)((async()=>{t.value=await(0,Q.ov)({id:a}),t.value=t.value.data,l.value=t.value.courseClass}));const o=e=>{s.value.cityId=e.value},r=e=>{s.value.areaId=e.value},i=(0,T.iH)(null),c=async t=>{if(t.preventDefault(),i.value.reportValidity()){s.value.courseClassId||(0,ee.FN)("請選擇報名班別"),s.value.cityId&&s.value.areaId&&s.value.address||(0,ee.FN)("請輸入正確地址");let t=await(0,Q.sq)(s.value);if(1==t.status)(0,ee.FN)("報名成功"),e.push({path:`/course/info/${a}`});else{let e=(0,X.b$)(t);(0,ee.FN)(e)}}};return{urlId:a,postData:s,classList:l,updateCityIdx:o,updateAreaIdx:r,save:c,form:i}},components:{Header:z.Z,CitySelecter:K.Z}},ae=a(3744);const ne=(0,ae.Z)(te,[["render",W],["__scopeId","data-v-622ece2b"]]);var le=ne}}]);
//# sourceMappingURL=5789.aec926fe.js.map
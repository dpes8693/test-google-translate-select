"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[1950],{6186:function(e,a,t){function n(){const e=navigator.userAgent.toLowerCase()||"";let a=navigator.platform.toLowerCase()||"";return a.indexOf("linux")>-1&&e.indexOf("android")>-1&&(a="android"),(a.indexOf("iphone")>-1||a.indexOf("ipad")>-1)&&(a="ios",console.log=function(e){window.webkit.messageHandlers.logger.postMessage(e)}),a}function i(e={}){let a=n()||"";if("android"==a)window.ExtCall.postMessage(e);else{if("ios"!=a)throw new Error(a);window.webkit.messageHandlers.ExtCall.postMessage(e)}}t.d(a,{H6:function(){return d},VU:function(){return u},sX:function(){return s}});const s={openNewWebView:l,replaceSetting:r,goBack:o,toBrowser:c};function l(e=""){const a=JSON.stringify({function:"popWebview",url:e});i(a)}function r(e="",a=""){const t=JSON.stringify({function:"changeProjectSettingURL",userid:e,url:a});i(t)}function c(e=""){const a=JSON.stringify({function:"toBrowser",url:e});i(a)}function o(){const e=JSON.stringify({function:"goBack"});i(e)}const u={lineLogin(e="",a=""){const t=JSON.stringify({function:"lineLogin",channel_id:e,callback:a});i(t)},appleLogin(e=""){const a=JSON.stringify({function:"appleLogin",callback:e});i(a)}},d={startGPS(e=""){const a=JSON.stringify({function:"startGPS",callback:e});i(a)},stopGPS(){const e=JSON.stringify({function:"stopGPS"});i(e)},getCurrentLocation(e=""){const a=JSON.stringify({function:"getCurrentLocation",callback:e});i(a)},getUserLocationHistory(e=""){const a=JSON.stringify({function:"getUserLocationHistory",callback:e});i(a)}}},8019:function(e,a,t){t.d(a,{D:function(){return n}});const n=()=>{const e="input:not(input[type = checkbox], input[type = radio], input[type = file], input[readonly], input[disabled])",a=document.querySelectorAll(e);a.forEach((e=>{e.addEventListener("focus",(()=>{document.body.classList.add("fixfixed")})),e.addEventListener("blur",(()=>{document.body.classList.remove("fixfixed")}))}))}},4988:function(e,a,t){t.d(a,{Cq:function(){return r},Qr:function(){return v},Ux:function(){return o},b$:function(){return l},g7:function(){return p},hB:function(){return f},nN:function(){return c},nV:function(){return g},vL:function(){return d},vW:function(){return m},yv:function(){return h}});t(7658);var n=t(6186),i=t(1830),s=t(4477);const l=e=>"string"==typeof e.message?e.message:"other error",r=e=>{for(let a=0;a<24;a++)e.push({id:a,time:`${a}:00`}),e.push({id:a+1,time:`${a}:30`})},c=()=>{const e=location.href,a=e.split("/"),t=a[a.length-1];return{urlId:t}},o=()=>{const e=location.href,a=e.split("/"),t=a[a.length-2];return{urlId:t}},u=e=>[e.getFullYear(),e.getMonth()+1,e.getDate()],d=e=>e<10?"0"+e:e,v=e=>{let a=JSON.parse(JSON.stringify(e)),t={},n="";return a.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=u(e.start),t[`${e.info[0]}/${e.info[1]}`]?t[`${e.info[0]}/${e.info[1]}`].push(e.info[2]):t[`${e.info[0]}/${e.info[1]}`]=[e.info[2]]})),n=a[0]?.start.getHours()==a[0]?.end.getHours()?`${a[0]?.start.getHours()}:${d(a[0]?.start.getMinutes())} ~ ${a[0]?.end.getHours()}:${d(a[0]?.end.getMinutes())}(24小時)`:`${a[0]?.start.getHours()}:${d(a[0]?.start.getMinutes())} ~ ${a[0]?.end.getHours()}:${d(a[0]?.end.getMinutes())}`,{newDates:a,info:t,time:n}},f=e=>{let a=JSON.parse(JSON.stringify(e)),t={},n="";return a.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=u(e.start),t[`${e.info[0]}/${e.info[1]}`]?t[`${e.info[0]}/${e.info[1]}`].push([e.info[2],e.isDone]):t[`${e.info[0]}/${e.info[1]}`]=[[e.info[2],e.isDone]]})),n=a[0]?.start.getHours()==a[0]?.end.getHours()?"全天(24小時)":`${a[0]?.start.getHours()}:${d(a[0]?.start.getMinutes())} ~ ${a[0]?.end.getHours()}:${d(a[0]?.end.getMinutes())}`,{newDates:a,info:t,time:n}},p=e=>{let a=[],t=[],n={},i=[];return e?.length>0&&e.forEach((e=>a.push(e.split("-")))),a.forEach((e=>{let a=`${e[0]}/${e[1]}`;t.push(a),n[a]?n[a].push(e[2]):n[a]=[e[2]]})),t=t.filter(((e,a)=>t.indexOf(e)===a)),1==t.length&&i.push(`${t?.[0]}/${n?.[t?.[0]]?.join("、")}`),t.length>1&&i.push(`${t?.[1]}/${n?.[t?.[1]]?.join("、")}`),{monthInfo:t,dayInfo:n,dateInfo:i}},g=(e,a)=>{let t={};return a.forEach((a=>{let n=parseInt(a.substring(1,3))-1,i=parseInt(a.substring(3,5))-1,s=parseInt(a.substring(5,7))-1;Object.keys(t).includes(e[n].name)||Object.keys(t).includes(e[n].data[i].name)?t[e[n].data[i].name].push(e[n].data[i].data[s]):t[e[n].data[i].name]=[e[n].data[i].data[s]]})),t},h=()=>{try{window.ExtCallStartGPS=()=>!0,n.H6.startGPS("ExtCallStartGPS")}catch(e){}},m=()=>{const e=(0,s.fG)();if(0==e.userPosition.cityId)try{window.ExtCallGetCurrentLocation=async(a,t,n)=>{if("string"===typeof a&&a?.length>6){const a=await(0,i.MP)({longitude:n,latitude:t});console.log("apiGetPosition已發送/"+a.data.defaultPlace.cityName+"/"+a.data.defaultPlace.townName),e.userPosition.cityId=a.data.defaultPlace.cityId,e.userPosition.areaId=a.data.defaultPlace.areaId,e.userPosition.cityId_2=a.data.longTermCare2Place.cityId,e.userPosition.areaId_2=a.data.longTermCare2Place.areaId,console.log(e.userPosition.cityId+"/"+e.userPosition.areaId+"/"+e.userPosition.cityId_2+"/"+e.userPosition.areaId_2)}},n.H6.getCurrentLocation("ExtCallGetCurrentLocation")}catch(a){console.log("電腦版不支援 extCall GPS")}}},5765:function(e,a,t){t.d(a,{Z:function(){return k}});var n=t(6252),i=t(3577);const s=e=>((0,n.dD)("data-v-7303a0ce"),e=e(),(0,n.Cn)(),e),l={class:"c-header c-header-3"},r={class:"navbar ui-navbar"},c={class:"navbar-nav"},o={class:"nav-link"},u=s((()=>(0,n._)("h1",{class:"navbar-brand"},null,-1))),d=s((()=>(0,n._)("ul",{class:"navbar-nav"},[(0,n._)("li",{class:"nav-item"},[(0,n._)("a",{href:"javascript:void(0);",class:"nav-link"})])],-1)));function v(e,a,t,s,v,f){return(0,n.wg)(),(0,n.iD)("header",l,[(0,n._)("nav",r,[(0,n._)("ul",c,[(0,n._)("li",{class:"nav-item",onClick:a[0]||(a[0]=(...e)=>s.btnClick&&s.btnClick(...e))},[(0,n._)("a",o,[(0,n._)("i",{class:(0,i.C_)(s.iconCode)},null,2),(0,n.Uk)((0,i.zw)(s.text),1)])])]),u,d])])}t(7658);var f=t(2201),p=t(4477),g={props:{left:String,path:String,clickFun:Function},setup(e){const a=(0,p.s6)(),t=a.goto,n=(0,f.tv)();let i="",s="";const l=e.left?e.left:"";"chevronArrow"==l?i="fa fa-chevron-left":(i="far fa-arrow-left",s="上一步");const r=()=>{if("-1"==e.path)try{t("back")}catch(a){console.log(a),n.back()}else e.path?n.push({path:e.path}):e.clickFun?e.clickFun():n.push({path:"/home"})};return{iconCode:i,text:s,btnClick:r}}},h=t(3744);const m=(0,h.Z)(g,[["render",v],["__scopeId","data-v-7303a0ce"]]);var k=m},1950:function(e,a,t){t.r(a),t.d(a,{default:function(){return me}});var n=t(6252),i=t(3577),s=t(9963);const l=e=>((0,n.dD)("data-v-228b9180"),e=e(),(0,n.Cn)(),e),r={class:"requirementAdd"},c={class:"mb-3 step-container"},o={class:"nav justify-content-center"},u={class:"nav-item"},d=l((()=>(0,n._)("span",null,"1",-1))),v=[d],f={class:"nav-item"},p=l((()=>(0,n._)("span",null,"2",-1))),g=[p],h={class:"title"},m=l((()=>(0,n._)("hr",null,null,-1))),k={key:0,class:"page1"},y={class:"mb-3"},b=l((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("服務類別"),(0,n._)("span",{class:"star"},"*")],-1))),w=["value"],_={class:"mb-3"},I=l((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("服務人員性別"),(0,n._)("span",{class:"star"},"*")],-1))),D={class:"input-group"},L={class:"col form-check"},H=l((()=>(0,n._)("label",{class:"form-check-label",for:"None"},"不指定",-1))),P={class:"col form-check"},$=l((()=>(0,n._)("label",{class:"form-check-label",for:"Male"},"男性",-1))),x={class:"col form-check"},C=l((()=>(0,n._)("label",{class:"form-check-label",for:"Female"},"女性",-1))),S={class:"mb-3"},q=l((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("服務年資"),(0,n._)("span",{class:"star"},"*")],-1))),N={key:0,class:"input-list"},U=["value","id"],O=["for"],j={class:"mb-3"},G=l((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("語言能力(複選)"),(0,n._)("span",{class:"star"},"*")],-1))),E={key:0,class:"input-list"},T=["value","id"],F={class:"form-check-label",for:"'lang'+item.id"},M={class:"mb-3"},J=l((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("是否需具備該服務類別專業證照"),(0,n._)("span",{class:"star"},"*")],-1))),R={class:"input-group"},V={class:"col form-check"},Y=l((()=>(0,n._)("label",{class:"form-check-label",for:"yes"},"是",-1))),z={class:"col form-check"},A=l((()=>(0,n._)("label",{class:"form-check-label",for:"no"},"否",-1))),B={key:1,class:"page2"},K={class:"mb-3"},Z=l((()=>(0,n._)("label",{class:"form-label"},[(0,n.Uk)("服務需求(複選)"),(0,n._)("span",{class:"star"})],-1))),W={class:"input-pill"},X={key:0,class:"row",required:""},Q=["value","id"],ee=["for"],ae={class:"c-footer"},te={class:"ui-tabbtn"},ne={class:"row"},ie={class:"col"};function se(e,a,t,l,d,p){const se=(0,n.up)("Header");return(0,n.wg)(),(0,n.iD)(n.HY,null,["page1"==l.showPage?((0,n.wg)(),(0,n.j4)(se,{key:0,path:l.urlIdLink},null,8,["path"])):(0,n.kq)("",!0),"page2"==l.showPage?((0,n.wg)(),(0,n.j4)(se,{key:1,clickFun:l.backToPage1},null,8,["clickFun"])):(0,n.kq)("",!0),(0,n._)("div",r,[(0,n._)("div",c,[(0,n._)("ul",o,[(0,n._)("li",u,[(0,n._)("a",{href:"javascript:void(0);",class:(0,i.C_)(l.stepStyle[0])},v,2)]),(0,n._)("li",f,[(0,n._)("a",{href:"javascript:void(0);",class:(0,i.C_)(l.stepStyle[1])},g,2)])])]),(0,n._)("div",h,[(0,n._)("p",null,(0,i.zw)(l.title),1)]),m,"page1"==l.showPage?((0,n.wg)(),(0,n.iD)("div",k,[(0,n._)("div",y,[b,l.jobTypeList.length>0?(0,n.wy)(((0,n.wg)(),(0,n.iD)("select",{key:0,class:"form-control form-select","onUpdate:modelValue":a[0]||(a[0]=e=>l.serviceData.serviceRequirementId=e)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.jobTypeList,(e=>((0,n.wg)(),(0,n.iD)("option",{value:e.id,key:e.id},(0,i.zw)(e.name),9,w)))),128))],512)),[[s.bM,l.serviceData.serviceRequirementId]]):(0,n.kq)("",!0)]),(0,n._)("div",_,[I,(0,n._)("div",D,[(0,n._)("div",L,[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",value:"None",id:"None","onUpdate:modelValue":a[1]||(a[1]=e=>l.serviceData.gender=e)},null,512),[[s.G2,l.serviceData.gender]]),H]),(0,n._)("div",P,[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",value:"Male",id:"Male","onUpdate:modelValue":a[2]||(a[2]=e=>l.serviceData.gender=e)},null,512),[[s.G2,l.serviceData.gender]]),$]),(0,n._)("div",x,[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",value:"Female",id:"Female","onUpdate:modelValue":a[3]||(a[3]=e=>l.serviceData.gender=e)},null,512),[[s.G2,l.serviceData.gender]]),C])])]),(0,n._)("div",S,[q,l.expList.length>0?((0,n.wg)(),(0,n.iD)("div",N,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.expList,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"form-check-inline",key:e.id},[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",value:"exp"+e.id,id:"exp"+e.id,"onUpdate:modelValue":a[4]||(a[4]=e=>l.serviceData.seniorityId=e)},null,8,U),[[s.G2,l.serviceData.seniorityId]]),(0,n._)("label",{class:"form-check-label",for:"exp"+e.id},(0,i.zw)(e.name),9,O)])))),128))])):(0,n.kq)("",!0)]),(0,n._)("div",j,[G,l.langList.length>0?((0,n.wg)(),(0,n.iD)("div",E,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.langList,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"form-check-inline",key:e.id},[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"form-check-input",value:"lang"+e.id,id:"lang"+e.id,"onUpdate:modelValue":a[5]||(a[5]=e=>l.serviceData.languageId=e)},null,8,T),[[s.e8,l.serviceData.languageId]]),(0,n._)("label",F,(0,i.zw)(e.name),1)])))),128))])):(0,n.kq)("",!0)]),(0,n._)("div",M,[J,(0,n._)("div",R,[(0,n._)("div",V,[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",value:"1",id:"yes","onUpdate:modelValue":a[6]||(a[6]=e=>l.serviceData.isHasLicense=e)},null,512),[[s.G2,l.serviceData.isHasLicense]]),Y]),(0,n._)("div",z,[(0,n.wy)((0,n._)("input",{type:"radio",class:"form-check-input",value:"0",id:"no","onUpdate:modelValue":a[7]||(a[7]=e=>l.serviceData.isHasLicense=e)},null,512),[[s.G2,l.serviceData.isHasLicense]]),A])])])])):(0,n.kq)("",!0),"page2"==l.showPage?((0,n.wg)(),(0,n.iD)("div",B,[(0,n._)("div",K,[Z,(0,n._)("div",W,[l.serviceRequirementList.length>0?((0,n.wg)(),(0,n.iD)("div",X,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.serviceRequirementList,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"col-4 form-check",key:e.id},[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"form-check-input",value:e.id,id:e.id,"onUpdate:modelValue":a[8]||(a[8]=e=>l.serviceData.serviceId=e)},null,8,Q),[[s.e8,l.serviceData.serviceId]]),(0,n._)("label",{class:"form-check-label",for:e.id},(0,i.zw)(e.name),9,ee)])))),128))])):(0,n.kq)("",!0)])])])):(0,n.kq)("",!0)]),(0,n._)("footer",ae,[(0,n._)("div",te,[(0,n._)("div",ne,[(0,n._)("div",ie,["page1"==l.showPage?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-primary",type:"button",onClick:a[9]||(a[9]=(...e)=>l.save&&l.save(...e))},"確認並繼續")):(0,n.kq)("",!0),"page2"==l.showPage?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-primary",type:"button",onClick:a[10]||(a[10]=(...e)=>l.save2&&l.save2(...e))},"完成新增")):(0,n.kq)("",!0)])])])])],64)}t(7658);var le=t(2262),re=t(2201),ce=t(1557),oe=t(5765),ue=t(1830),de=t(4477),ve=t(4988),fe=t(8019),pe={setup(){const e=(0,de.A2)(),a=(0,de.dU)(),t=(0,de.dX)(),i=(0,re.tv)(),s=(0,le.iH)({}),l=(0,ve.nN)().urlId,r=`/requirement/info/${l}`;let c=(0,le.iH)(["nav-link active","nav-link","nav-link"]),o=(0,le.iH)("page1"),u=(0,le.iH)("服務資料");const d=()=>{o.value="page1",c.value=["nav-link active ","nav-link","nav-link"],u.value="基本資料"};s.value.serviceRequirementId=null,s.value.gender="",s.value.seniorityId="",s.value.languageId=[],s.value.isHasLicense=0;const v=()=>{0==s.value.languageId.length?(0,ce.FN)("請至少填寫一項語言能力"):(o.value="page2",c.value=["nav-link visited","nav-link active","nav-link"],u.value="照顧需求")};s.value.serviceId=[];let f=(0,le.iH)({});const p=async()=>{if(0==s.value.serviceId.length)(0,ce.FN)("請至少填寫一項服務需求");else{f.value.serviceRequirementId=parseInt(s.value.serviceRequirementId),f.value.gender=s.value.gender,f.value.seniorityId=parseInt(s.value.seniorityId.replace(/[^0-9]/gi,"")),f.value.languageId=s.value.languageId.map((e=>parseInt(e.replace(/[^0-9]/gi,"")))),f.value.isHasLicense=parseInt(s.value.isHasLicense),f.value.serviceId=s.value.serviceId;let e=await(0,ue.vj)({id:l},f.value);"更新成功"==e.data?((0,ce.FN)(e.data),i.push({path:`/requirement/info/${l}`})):(0,ce.FN)(e.message)}};let g=(0,le.iH)([]),h=(0,le.iH)([]),m=(0,le.iH)([]),k=(0,le.iH)([]);return(0,n.bv)((async()=>{(0,fe.D)(),void 0==a.jobTypeList?(g.value=await(0,ue.Dr)(),g.value=g.value.data.data,a.jobTypeList=g.value):g.value=a.jobTypeList,void 0==t.experienceTypeList?(h.value=await(0,ue.PF)(),h.value=h.value.data.data,t.experienceTypeList=h.value):h.value=t.experienceTypeList,void 0==e.languageTypeList?(m.value=await(0,ue.L2)(),m.value=m.value.data.data,e.languageTypeList=m.value):m.value=e.languageTypeList;let n=await(0,ue.f)({id:l});n=n.data;let i=g.value.filter((e=>e.name==n.name));s.value.serviceRequirementId=i[0].id,s.value.gender=n.gender,n.language.forEach((e=>{s.value.languageId.push(`lang${e.id}`)})),s.value.seniorityId=`exp${n.seniority.id}`,n.service.forEach((e=>{s.value.serviceId.push(e.id)}))})),(0,n.YP)((()=>s.value.serviceRequirementId),(async(e,a)=>{k.value=await(0,ue.su)({id:s.value.serviceRequirementId}),k.value=k.value.data.data,null!=a&&(s.value.serviceId=[])})),{urlIdLink:r,serviceData:s,jobTypeList:g,expList:h,langList:m,serviceRequirementList:k,stepStyle:c,showPage:o,title:u,save:v,backToPage1:d,save2:p}},components:{Header:oe.Z}},ge=t(3744);const he=(0,ge.Z)(pe,[["render",se],["__scopeId","data-v-228b9180"]]);var me=he}}]);
//# sourceMappingURL=1950.eca59743.js.map
"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[6069],{6186:function(e,a,t){function n(){const e=navigator.userAgent.toLowerCase()||"";let a=navigator.platform.toLowerCase()||"";return a.indexOf("linux")>-1&&e.indexOf("android")>-1&&(a="android"),(a.indexOf("iphone")>-1||a.indexOf("ipad")>-1)&&(a="ios",console.log=function(e){window.webkit.messageHandlers.logger.postMessage(e)}),a}function i(e={}){let a=n()||"";if("android"==a)window.ExtCall.postMessage(e);else{if("ios"!=a)throw new Error(a);window.webkit.messageHandlers.ExtCall.postMessage(e)}}t.d(a,{H6:function(){return u},VU:function(){return d},sX:function(){return s}});const s={openNewWebView:o,replaceSetting:l,goBack:r,toBrowser:c};function o(e=""){const a=JSON.stringify({function:"popWebview",url:e});i(a)}function l(e="",a=""){const t=JSON.stringify({function:"changeProjectSettingURL",userid:e,url:a});i(t)}function c(e=""){const a=JSON.stringify({function:"toBrowser",url:e});i(a)}function r(){const e=JSON.stringify({function:"goBack"});i(e)}const d={lineLogin(e="",a=""){const t=JSON.stringify({function:"lineLogin",channel_id:e,callback:a});i(t)},appleLogin(e=""){const a=JSON.stringify({function:"appleLogin",callback:e});i(a)}},u={startGPS(e=""){const a=JSON.stringify({function:"startGPS",callback:e});i(a)},stopGPS(){const e=JSON.stringify({function:"stopGPS"});i(e)},getCurrentLocation(e=""){const a=JSON.stringify({function:"getCurrentLocation",callback:e});i(a)},getUserLocationHistory(e=""){const a=JSON.stringify({function:"getUserLocationHistory",callback:e});i(a)}}},4988:function(e,a,t){t.d(a,{Cq:function(){return l},Qr:function(){return v},Ux:function(){return r},b$:function(){return o},g7:function(){return p},hB:function(){return f},nN:function(){return c},nV:function(){return g},vL:function(){return u},vW:function(){return y},yv:function(){return m}});t(7658);var n=t(6186),i=t(1830),s=t(4477);const o=e=>"string"==typeof e.message?e.message:"other error",l=e=>{for(let a=0;a<24;a++)e.push({id:a,time:`${a}:00`}),e.push({id:a+1,time:`${a}:30`})},c=()=>{const e=location.href,a=e.split("/"),t=a[a.length-1];return{urlId:t}},r=()=>{const e=location.href,a=e.split("/"),t=a[a.length-2];return{urlId:t}},d=e=>[e.getFullYear(),e.getMonth()+1,e.getDate()],u=e=>e<10?"0"+e:e,v=e=>{let a=JSON.parse(JSON.stringify(e)),t={},n="";return a.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=d(e.start),t[`${e.info[0]}/${e.info[1]}`]?t[`${e.info[0]}/${e.info[1]}`].push(e.info[2]):t[`${e.info[0]}/${e.info[1]}`]=[e.info[2]]})),n=a[0]?.start.getHours()==a[0]?.end.getHours()?`${a[0]?.start.getHours()}:${u(a[0]?.start.getMinutes())} ~ ${a[0]?.end.getHours()}:${u(a[0]?.end.getMinutes())}(24小時)`:`${a[0]?.start.getHours()}:${u(a[0]?.start.getMinutes())} ~ ${a[0]?.end.getHours()}:${u(a[0]?.end.getMinutes())}`,{newDates:a,info:t,time:n}},f=e=>{let a=JSON.parse(JSON.stringify(e)),t={},n="";return a.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=d(e.start),t[`${e.info[0]}/${e.info[1]}`]?t[`${e.info[0]}/${e.info[1]}`].push([e.info[2],e.isDone]):t[`${e.info[0]}/${e.info[1]}`]=[[e.info[2],e.isDone]]})),n=a[0]?.start.getHours()==a[0]?.end.getHours()?"全天(24小時)":`${a[0]?.start.getHours()}:${u(a[0]?.start.getMinutes())} ~ ${a[0]?.end.getHours()}:${u(a[0]?.end.getMinutes())}`,{newDates:a,info:t,time:n}},p=e=>{let a=[],t=[],n={},i=[];return e?.length>0&&e.forEach((e=>a.push(e.split("-")))),a.forEach((e=>{let a=`${e[0]}/${e[1]}`;t.push(a),n[a]?n[a].push(e[2]):n[a]=[e[2]]})),t=t.filter(((e,a)=>t.indexOf(e)===a)),1==t.length&&i.push(`${t?.[0]}/${n?.[t?.[0]]?.join("、")}`),t.length>1&&i.push(`${t?.[1]}/${n?.[t?.[1]]?.join("、")}`),{monthInfo:t,dayInfo:n,dateInfo:i}},g=(e,a)=>{let t={};return a.forEach((a=>{let n=parseInt(a.substring(1,3))-1,i=parseInt(a.substring(3,5))-1,s=parseInt(a.substring(5,7))-1;Object.keys(t).includes(e[n].name)||Object.keys(t).includes(e[n].data[i].name)?t[e[n].data[i].name].push(e[n].data[i].data[s]):t[e[n].data[i].name]=[e[n].data[i].data[s]]})),t},m=()=>{try{window.ExtCallStartGPS=()=>!0,n.H6.startGPS("ExtCallStartGPS")}catch(e){}},y=()=>{const e=(0,s.fG)();if(0==e.userPosition.cityId)try{window.ExtCallGetCurrentLocation=async(a,t,n)=>{if("string"===typeof a&&a?.length>6){const a=await(0,i.MP)({longitude:n,latitude:t});console.log("apiGetPosition已發送/"+a.data.defaultPlace.cityName+"/"+a.data.defaultPlace.townName),e.userPosition.cityId=a.data.defaultPlace.cityId,e.userPosition.areaId=a.data.defaultPlace.areaId,e.userPosition.cityId_2=a.data.longTermCare2Place.cityId,e.userPosition.areaId_2=a.data.longTermCare2Place.areaId,console.log(e.userPosition.cityId+"/"+e.userPosition.areaId+"/"+e.userPosition.cityId_2+"/"+e.userPosition.areaId_2)}},n.H6.getCurrentLocation("ExtCallGetCurrentLocation")}catch(a){console.log("電腦版不支援 extCall GPS")}}},9799:function(e,a,t){t.d(a,{Z:function(){return _}});var n=t(6252),i=t(3577);const s=e=>((0,n.dD)("data-v-6d50fb3a"),e=e(),(0,n.Cn)(),e),o={class:"c-header"},l={class:"navbar ui-navbar"},c={class:"navbar-nav"},r=s((()=>(0,n._)("a",{class:"nav-link"},[(0,n._)("i",{class:"fa fa-chevron-left"})],-1))),d=[r],u={class:"navbar-brand"},v={class:"navbar-nav"},f={class:"nav-item"},p={class:"nav-link"};function g(e,a,t,s,r,g){return(0,n.wg)(),(0,n.iD)("header",o,[(0,n._)("nav",l,[(0,n._)("ul",c,[(0,n._)("li",{class:"nav-item",onClick:a[0]||(a[0]=(...e)=>s.backTo&&s.backTo(...e))},d)]),(0,n._)("h1",u,(0,i.zw)(t.title),1),(0,n._)("ul",v,[(0,n._)("li",f,[(0,n._)("a",p,[(0,n._)("i",{class:(0,i.C_)(s.iconCode),onClick:a[1]||(a[1]=(...e)=>s.goto&&s.goto(...e))},[(0,n._)("span",null,(0,i.zw)(s.text),1)],2)])])])])])}t(7658);var m=t(2201),y=t(4477),h={props:{title:String,right:String,path:String,backToPath:String},setup(e){const a=(0,y.s6)(),t=a.goto,n=(0,m.tv)();let i="",s="";const o=e.right?e.right:"";"add"==o&&(i="fa fa-plus",s=" 新增"),"map"==o&&(i="fas fa-map-marker-alt",s=" 地圖"),"text"==o&&(i="far fa-list-ul",s=" 列表"),"search"==o&&(i="far fa-search",s=" 搜尋");const l=()=>{"search"==e.path?console.log("search"):n.push({path:e.path})},c=()=>{if("-1"==e.backToPath)try{t("back")}catch(a){console.log(a),n.back()}else e.backToPath?n.push({path:e.backToPath}):n.push({path:"/home"})};return{iconCode:i,text:s,backTo:c,goto:l}}},w=t(3744);const k=(0,w.Z)(h,[["render",g],["__scopeId","data-v-6d50fb3a"]]);var _=k},6069:function(e,a,t){t.r(a),t.d(a,{default:function(){return xe}});var n=t(6252),i=t(3577);const s=e=>((0,n.dD)("data-v-31cda67a"),e=e(),(0,n.Cn)(),e),o={key:0,class:"workApple"},l={class:"item-container"},c=s((()=>(0,n._)("div",{class:"item-title"},"照顧日期時段",-1))),r={class:"item-content"},d={class:"main2"},u=s((()=>(0,n._)("div",{class:"title2"},"服務日期",-1))),v={class:"main2"},f=s((()=>(0,n._)("div",{class:"title2"},"服務時段",-1))),p={class:"content2"},g={class:"item-container"},m={class:"item-title item-link collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapse1"},y={class:"item-content collapse",id:"collapse1"},h={class:"main1"},w=s((()=>(0,n._)("div",{class:"title1"},"性別",-1))),k={class:"content1"},_={class:"main1"},b=s((()=>(0,n._)("div",{class:"title1"},"年資",-1))),D={class:"content1"},I={class:"main1"},P=s((()=>(0,n._)("div",{class:"title1"},"語言",-1))),S={class:"content1"},$={class:"main2"},C=s((()=>(0,n._)("div",{class:"title2"},"具備證照",-1))),H={key:0,class:"content2"},O={key:1,class:"content2"},T={class:"item-container"},N=s((()=>(0,n._)("div",{class:"item-title item-link collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapse2"},"被照顧者資訊 ",-1))),z={class:"item-content collapse",id:"collapse2"},x={class:"main1"},E=s((()=>(0,n._)("div",{class:"title1"},"名稱",-1))),L={class:"content1"},M={class:"main1"},J=s((()=>(0,n._)("div",{class:"title1"},"性別",-1))),G={class:"content1"},U={class:"main1"},j=s((()=>(0,n._)("div",{class:"title1"},"年齡",-1))),W={class:"content1"},A={class:"main1"},F=s((()=>(0,n._)("div",{class:"title1"},"身高",-1))),q={class:"content1"},B={class:"main1"},Y=s((()=>(0,n._)("div",{class:"title1"},"體重",-1))),Z={class:"content1"},V={class:"main1"},Q=s((()=>(0,n._)("div",{class:"title1"},"關係",-1))),R={class:"content1"},K={class:"main2"},X=s((()=>(0,n._)("div",{class:"title2"},"行動能力",-1))),ee={class:"content2"},ae={class:"main2"},te=s((()=>(0,n._)("div",{class:"title2"},"照顧地點",-1))),ne={key:0,class:"content2"},ie={key:1,class:"content2"},se={class:"item-container"},oe=s((()=>(0,n._)("div",{class:"item-title item-link collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapse3"},"病症",-1))),le={class:"item-content collapse",id:"collapse3"},ce={class:"title2"},re={class:"content2"},de={class:"item-container"},ue=s((()=>(0,n._)("div",{class:"item-title item-link collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapse4"},"服務需求",-1))),ve={class:"item-content collapse",id:"collapse4"},fe={class:"main2"},pe={class:"content2"},ge={class:"mt-4b btn-container"},me={class:"row"},ye={class:"col"},he={class:"col"};function we(e,a,t,s,we,ke){const _e=(0,n.up)("Header"),be=(0,n.up)("WorkCalendar");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(_e,{title:"主動應徵",backToPath:s.urlIdLink},null,8,["backToPath"]),s.workInfoData.monthInfo?((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",l,[c,(0,n._)("div",r,[(0,n._)("div",d,[u,(0,n.Wm)(be,{onUpdateDay:s.updateDay,onUpdateCancelDay:s.updateCancelDay},null,8,["onUpdateDay","onUpdateCancelDay"])]),(0,n._)("div",v,[f,(0,n._)("div",p,(0,i.zw)(s.workInfoData.time),1)])])]),(0,n._)("div",g,[(0,n._)("div",m,(0,i.zw)(s.workInfoData.employerService.name),1),(0,n._)("div",y,[(0,n._)("div",h,[w,(0,n._)("div",k,(0,i.zw)("Male"==s.workInfoData.employerService.gender?"男性":"Female"==s.workInfoData.employerService.gender?"女性":"不指定"),1)]),(0,n._)("div",_,[b,(0,n._)("div",D,(0,i.zw)(s.workInfoData.employerService.seniority.name),1)]),(0,n._)("div",I,[P,(0,n._)("div",S,(0,i.zw)(s.workInfoData?.employerService?.languageInfo?.join("、")),1)]),(0,n._)("div",$,[C,s.workInfoData.employerService?.license?.name?((0,n.wg)(),(0,n.iD)("div",H,(0,i.zw)(s.workInfoData.employerService.license.name),1)):(0,n.kq)("",!0),s.workInfoData.employerService?.license?.name?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",O,"無"))])])]),(0,n._)("div",T,[N,(0,n._)("div",z,[(0,n._)("div",x,[E,(0,n._)("div",L,(0,i.zw)(s.workInfoData.disabledPerson.name),1)]),(0,n._)("div",M,[J,(0,n._)("div",G,(0,i.zw)("Female"==s.workInfoData.disabledPerson.gender?"女性":"男性"),1)]),(0,n._)("div",U,[j,(0,n._)("div",W,(0,i.zw)(s.workInfoData.disabledPerson.age)+"歲",1)]),(0,n._)("div",A,[F,(0,n._)("div",q,(0,i.zw)(s.workInfoData.disabledPerson.height)+"公分",1)]),(0,n._)("div",B,[Y,(0,n._)("div",Z,(0,i.zw)(s.workInfoData.disabledPerson.weight)+"公斤",1)]),(0,n._)("div",V,[Q,(0,n._)("div",R,(0,i.zw)(s.workInfoData.disabledPerson.relationship),1)]),(0,n._)("div",K,[X,(0,n._)("div",ee,(0,i.zw)(s.workInfoData?.disabledPerson?.abilityToActInfo?.join("、")),1)]),(0,n._)("div",ae,[te,"居家"==s.workInfoData.disabledPerson.servicePlace.placeType.id?((0,n.wg)(),(0,n.iD)("div",ne,(0,i.zw)(s.workInfoData.disabledPerson.servicePlace.city.name)+(0,i.zw)(s.workInfoData.disabledPerson.servicePlace.area.name),1)):(0,n.kq)("",!0),"居家"!=s.workInfoData.disabledPerson.servicePlace.placeType.id?((0,n.wg)(),(0,n.iD)("div",ie,(0,i.zw)(s.workInfoData.disabledPerson.servicePlace.place.name),1)):(0,n.kq)("",!0)])])]),(0,n._)("div",se,[oe,(0,n._)("div",le,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.workInfoData.disabledPerson.disease,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"main2",key:e.name},[(0,n._)("div",ce,(0,i.zw)(e.diseaseName),1),(0,n._)("div",re,(0,i.zw)(e.symptom?.join("、")),1)])))),128))])]),(0,n._)("div",de,[ue,(0,n._)("div",ve,[(0,n._)("div",fe,[(0,n._)("div",pe,(0,i.zw)(s.workInfoData?.employerService?.serviceInfo?.join("、")),1)])])]),(0,n._)("div",ge,[(0,n._)("div",me,[(0,n._)("div",ye,[(0,n._)("button",{class:"btn btn-outline-primary",type:"button",onClick:a[0]||(a[0]=(...e)=>s.apply&&s.apply(...e))},"確定應徵")]),(0,n._)("div",he,[(0,n._)("button",{class:"btn btn-outline-primary",type:"button",onClick:a[1]||(a[1]=e=>s.goto(`/work/info/${s.urlId}`))},"取消返回")])])])])):(0,n.kq)("",!0)],64)}t(7658);var ke=t(9799);const _e={class:"testStyle2"};function be(e,a,t,i,s,o){const l=(0,n.up)("v-calendar");return(0,n.wg)(),(0,n.iD)("div",_e,[(0,n.Wm)(l,{class:"date-picker","is-expanded":"","from-page":{month:i.month,year:i.year},attributes:i.attrs,onDayclick:i.dayclick},null,8,["from-page","attributes","onDayclick"])])}var De=t(2262),Ie=t(1830),Pe=t(4988),Se={setup(e,{emit:a}){const t=(0,Pe.Ux)().urlId,i=(0,De.iH)({});let s=new Date,o=s.getFullYear(),l=s.getMonth()+1,c=((0,De.iH)(),(0,De.iH)(""),(0,De.iH)(""),(0,De.iH)()),r=(0,De.iH)(),d=(0,De.iH)();(0,De.iH)(s);const u=(0,De.iH)([{highlight:{style:{background:"#ccc"},contentStyle:{color:"black"}},dates:c},{highlight:{color:"purple",fillMode:"solid",contentClass:"italic"},dates:r}]),v=e=>{r.value.includes(e.id)?r.value=r.value.filter((a=>a!=e.id)):c.value.includes(e.id)&&r.value.push(e.id),d.value=c.value.filter((e=>!r.value.includes(e))),f(r.value,d.value)},f=(e,t)=>{a("updateDay",e),a("updateCancelDay",t)};(0,n.bv)((async()=>{i.value=await(0,Ie.Oe)({id:t}),i.value=i.value.data,c.value=p(i.value.workdays),r.value=c.value,f(r.value,d.value)}));const p=e=>{let a=[];return e.forEach((e=>{a.push(e.start.split(" ")[0])})),a};return{attrs:u,dayclick:v,year:o,month:l}}},$e=t(3744);const Ce=(0,$e.Z)(Se,[["render",be],["__scopeId","data-v-05e42a9e"]]);var He=Ce,Oe=t(2201),Te=t(1557),Ne={setup(){const e=(0,Oe.tv)(),a=(0,Pe.Ux)().urlId,t=`/work/info/${a}`,i=(0,Pe.nN)().urlId,s=(0,De.iH)({}),o={workOrderId:a,caretakerResumeId:i,isConfirm:1,checkTime:[],cancelTime:[],checkDays:[],cancelDays:[]};(0,n.bv)((async()=>{s.value=await(0,Ie.Oe)({id:a}),s.value=s.value.data;let e=(0,Pe.Qr)(s.value.workdays);s.value.newDates=e.newDates,s.value.info=e.info,s.value.time=e.time,s.value.monthInfo=Object.keys(s.value.info);await(0,Ie.pe)();s.value.employerService.languageInfo=[],s.value.employerService.language?.length>0&&s.value.employerService.language.forEach((e=>{s.value.employerService.languageInfo.push(e.name)})),s.value.disabledPerson.abilityToActInfo=[],s.value.employerService.abilityToAct?.length>0&&s.value.disabledPerson.abilityToAct.forEach((e=>{s.value.disabledPerson.abilityToActInfo.push(e.name)})),s.value.employerService.serviceInfo=[],s.value.employerService.service?.length>0&&s.value.employerService.service.forEach((e=>{s.value.employerService.serviceInfo.push(e.name)}))}));const l=async e=>{o.checkDays=e},c=async e=>{o.cancelDays=e},r=async()=>{let e=s.value.workdays[0].start.split(" ")[1],t=s.value.workdays[0].end.split(" ")[1];e!=t?(o.checkTime=u(o.checkDays,e,t),o.cancelDays&&(o.cancelTime=u(o.cancelDays,e,t))):(o.checkTime=v(o.checkDays,e,t),o.cancelDays&&(o.cancelTime=v(o.cancelDays,e,t)));try{let e=await(0,Ie.lT)(o);if(1==e.status)(0,Te.FN)("已送出"),d(`/work/info/${a}`);else{let a=(0,Pe.b$)(e);(0,Te.FN)(a)}}catch(n){console.log(n)}},d=a=>{e.push({path:a})},u=(e,a,t)=>{let n=[];return e.forEach((e=>{n.push({start:`${e} ${a}`,end:`${e} ${t}`})})),n},v=(e,a,t)=>{let n=[];return e.forEach((e=>{let i=new Date(Date.parse(e)+864e5);n.push({start:`${e} ${a}`,end:`${i.getFullYear()}-${i.getMonth()+1}-${i.getDate()} ${t}`})})),n};return{workInfoData:s,goto:d,urlId:a,urlIdLink:t,apply:r,updateDay:l,updateCancelDay:c}},components:{Header:ke.Z,WorkCalendar:He}};const ze=(0,$e.Z)(Ne,[["render",we],["__scopeId","data-v-31cda67a"]]);var xe=ze}}]);
//# sourceMappingURL=6069.a01d26fb.js.map
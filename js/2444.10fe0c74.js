"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[2444],{6382:function(e,a,l){l.d(a,{Z:function(){return w}});var t=l(6252),i=l(9963),c=l(3577);const s={class:"mb-3"},n=(0,t._)("label",{class:"form-label"},[(0,t.Uk)("行動能力"),(0,t._)("span",{class:"star"},"*")],-1),u={key:0,class:"input-list"},d=["value","id"],r=["for"],v={class:"form-check-inline"},p=["value","id"],o=(0,t._)("label",{class:"form-check-label",for:"act6"},"其他",-1);function y(e,a,l,y,m,_){return(0,t.wg)(),(0,t.iD)("div",s,[n,y.actTypeList.length>0?((0,t.wg)(),(0,t.iD)("div",u,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(y.actTypeList,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"form-check-inline",key:e.id},[(0,t.wy)((0,t._)("input",{type:"checkbox",class:"form-check-input",value:"act"+e.id,id:e.name,"onUpdate:modelValue":a[0]||(a[0]=e=>y.actType=e)},null,8,d),[[i.e8,y.actType]]),(0,t._)("label",{class:"form-check-label",for:e.name},(0,c.zw)(e.name),9,r)])))),128)),(0,t._)("div",v,[(0,t.wy)((0,t._)("input",{type:"checkbox",class:"form-check-input",value:"act"+(y.actTypeList.length+1),id:y.actTypeList.length+1,"onUpdate:modelValue":a[1]||(a[1]=e=>y.actType=e),onChange:a[2]||(a[2]=(...e)=>y.showActInput&&y.showActInput(...e))},null,40,p),[[i.e8,y.actType]]),o])])):(0,t.kq)("",!0),y.isShow?(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",{key:1,type:"text",class:"form-control mt-1",placeholder:"請輸入其他能力","onUpdate:modelValue":a[3]||(a[3]=e=>y.actInput=e)},null,512)),[[i.nr,y.actInput]]):(0,t.kq)("",!0)])}l(7658);var m=l(2262),_=l(1830),k=l(4477),b={props:{actType_p:Object,otherAct_p:String},setup(e,{emit:a}){const l=(0,k.LA)();let i=(0,m.iH)([]),c=(0,m.iH)({}),s=(0,m.iH)(0),n=(0,m.iH)("");const u=()=>{0==s.value?s.value=1:s.value=0},d=()=>{let e=i.value.map((e=>e.replace(/[^0-9]/gi,"")));a("actType",e)},r=()=>{a("actInput",n.value)};return(0,t.bv)((async()=>{void 0==l.actTypeList?(c.value=await(0,_.jh)(),c.value=c.value.data.data,l.actTypeList=c.value):c.value=l.actTypeList,e.actType_p&&e.actType_p.forEach((e=>{i.value.push("act"+e.id)})),e.otherAct_p?.length>0&&(n.value=e.otherAct_p,i.value.push("act"+(c.value.length+1)),s.value=1)})),(0,t.YP)((()=>i.value),(async()=>{d()})),(0,t.YP)((()=>n.value),(async()=>{r()})),{actType:i,isShow:s,showActInput:u,actTypeList:c,actInput:n}}},h=l(3744);const f=(0,h.Z)(b,[["render",y]]);var w=f},179:function(e,a,l){l.d(a,{Z:function(){return b}});var t=l(6252),i=l(3577),c=l(9963);const s={class:"input-group"},n=(0,t._)("option",{value:"undefined",disabled:""},"請選擇縣市",-1),u=["value"],d=(0,t._)("option",{value:"undefined",disabled:""},"請選擇鄉鎮區",-1),r=["value"];function v(e,a,l,v,p,o){return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.wy)((0,t._)("select",{class:"col form-control form-select","onUpdate:modelValue":a[0]||(a[0]=e=>v.cityIdx=e)},[n,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(v.cityAreaData,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.id,key:e.id},(0,i.zw)(e.city_name),9,u)))),128))],512),[[c.bM,v.cityIdx]]),(0,t.wy)((0,t._)("select",{class:"col form-control form-select","onUpdate:modelValue":a[1]||(a[1]=e=>v.areaIdx=e)},[d,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(v.areaList,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.id,key:e.id},(0,i.zw)(e.area_name),9,r)))),128))],512),[[c.bM,v.areaIdx]])])}var p=l(2262),o=l(1830),y=l(4477),m={props:{cityIdx_p:Number||String||void 0,areaIdx_p:Number||String||void 0},setup(e,{emit:a}){const l=(0,y.ce)();let i=(0,p.iH)([]),c=(0,p.iH)(e.cityIdx_p),s=(0,p.iH)(e.areaIdx_p),n=((0,p.iH)([]),(0,p.iH)([]));const u=()=>{a("cityIdx",c)},d=()=>{a("areaIdx",s)};return(0,t.bv)((async()=>{void 0==l.cityAreaList?(i.value=await(0,o.t3)(),i.value=i.value.data,l.cityAreaList=i.value):i.value=l.cityAreaList,void 0!=c.value&&(n.value=i.value[c.value-1].areas)})),(0,t.YP)((()=>c.value),(async()=>{n.value=i?.value?.[c.value-1]?.areas,u()})),(0,t.YP)((()=>s.value),(async()=>{d()})),(0,t.YP)((()=>e.cityIdx_p),(async()=>{c.value=e.cityIdx_p})),(0,t.YP)((()=>e.areaIdx_p),(async()=>{s.value=e.areaIdx_p})),{cityAreaData:i,areaList:n,cityIdx:c,areaIdx:s}}},_=l(3744);const k=(0,_.Z)(m,[["render",v]]);var b=k},697:function(e,a,l){l(6252),l(9963),l(3577);l(7658),l(2262),l(1830),l(4477),l(3744)},8389:function(e,a,l){l.r(a),l.d(a,{default:function(){return Ae}});var t=l(6252),i=l(3577),c=l(9963);const s=e=>((0,t.dD)("data-v-444022a4"),e=e(),(0,t.Cn)(),e),n={class:"careRecipientAdd"},u={class:"mb-3 step-container"},d={class:"nav justify-content-center"},r={class:"nav-item"},v=s((()=>(0,t._)("span",null,"1",-1))),p=[v],o={class:"nav-item"},y=s((()=>(0,t._)("span",null,"2",-1))),m=[y],_={class:"nav-item"},k=s((()=>(0,t._)("span",null,"3",-1))),b=[k],h={class:"title"},f=s((()=>(0,t._)("hr",null,null,-1))),w={class:"main"},g={ref:"form1"},P={class:"mb-3"},I=s((()=>(0,t._)("label",{class:"form-label"},[(0,t.Uk)("名稱"),(0,t._)("span",{class:"star"},"*")],-1))),T={class:"mb-3"},D=s((()=>(0,t._)("label",{class:"form-label"},[(0,t.Uk)("性別"),(0,t._)("span",{class:"star"},"*")],-1))),A={class:"input-group"},x={class:"col form-check"},H=s((()=>(0,t._)("label",{class:"form-check-label",for:"Male"},"男性",-1))),U={class:"col form-check"},q=s((()=>(0,t._)("label",{class:"form-check-label",for:"Female"},"女性",-1))),V={class:"mb-3"},L=s((()=>(0,t._)("label",{class:"form-label"},[(0,t.Uk)("年齡/歲"),(0,t._)("span",{class:"star"},"*")],-1))),F={class:"mb-3"},C=s((()=>(0,t._)("label",{class:"form-label"},[(0,t.Uk)("身高/公分"),(0,t._)("span",{class:"star"},"*")],-1))),Y={class:"mb-3"},S=s((()=>(0,t._)("label",{class:"form-label"},[(0,t.Uk)("體重/公斤"),(0,t._)("span",{class:"star"},"*")],-1))),j={class:"mb-3"},N=s((()=>(0,t._)("label",{class:"form-label"},[(0,t.Uk)("與申請人關係"),(0,t._)("span",{class:"star"},"*")],-1))),Z={key:0,class:"main2"},M={ref:"form2"},z={class:"mb-3"},G=s((()=>(0,t._)("label",{class:"form-label"},[(0,t.Uk)("居住方式"),(0,t._)("span",{class:"star"},"*")],-1))),K={class:"input-list"},J={class:"form-check-inline"},R=s((()=>(0,t._)("label",{class:"form-check-label",for:"live1"},"居家",-1))),O={class:"form-check-inline"},W=s((()=>(0,t._)("label",{class:"form-check-label",for:"live2"},"醫院",-1))),E={class:"form-check-inline"},$=s((()=>(0,t._)("label",{class:"form-check-label",for:"live3"},"療養院",-1))),B={class:"mb-3"},Q={key:0},X=s((()=>(0,t._)("div",{class:"note"}," 提醒您，居家地址必須填寫正確門牌位置，以方便管理人員打卡 ",-1))),ee={key:1},ae={class:"mb-3"},le=s((()=>(0,t._)("option",{value:"undefined",disabled:""},"請選擇醫院",-1))),te=["value"],ie={key:2},ce={class:"mb-3"},se=s((()=>(0,t._)("option",{value:"undefined",disabled:""},"請選擇療養院",-1))),ne=["value"],ue={key:1,class:"main3"},de={class:"c-footer"},re={class:"ui-tabbtn"},ve={class:"row"},pe={class:"col"};function oe(e,a,l,s,v,y){const k=(0,t.up)("Header"),oe=(0,t.up)("ActType"),ye=(0,t.up)("CitySelecter"),me=(0,t.up)("DiseaseType");return(0,t.wg)(),(0,t.iD)(t.HY,null,["page1"==s.showPage?((0,t.wg)(),(0,t.j4)(k,{key:0,path:s.urlLink},null,8,["path"])):(0,t.kq)("",!0),"page2"==s.showPage?((0,t.wg)(),(0,t.j4)(k,{key:1,clickFun:s.backToPage1},null,8,["clickFun"])):(0,t.kq)("",!0),"page3"==s.showPage?((0,t.wg)(),(0,t.j4)(k,{key:2,clickFun:s.backToPage2},null,8,["clickFun"])):(0,t.kq)("",!0),(0,t._)("div",n,[(0,t._)("div",u,[(0,t._)("ul",d,[(0,t._)("li",r,[(0,t._)("a",{href:"javascript:void(0);",class:(0,i.C_)(s.stepStyle[0])},p,2)]),(0,t._)("li",o,[(0,t._)("a",{href:"javascript:void(0);",class:(0,i.C_)(s.stepStyle[1])},m,2)]),(0,t._)("li",_,[(0,t._)("a",{href:"javascript:void(0);",class:(0,i.C_)(s.stepStyle[2])},b,2)])])]),(0,t._)("div",h,[(0,t._)("p",null,(0,i.zw)(s.title),1)]),f,(0,t.wy)((0,t._)("div",w,[(0,t._)("form",g,[(0,t._)("div",P,[I,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"請輸入名稱","onUpdate:modelValue":a[0]||(a[0]=e=>s.data.name=e),required:""},null,512),[[c.nr,s.data.name]])]),(0,t._)("div",T,[D,(0,t._)("div",A,[(0,t._)("div",x,[(0,t.wy)((0,t._)("input",{type:"radio",class:"form-check-input",value:"Male",id:"Male","onUpdate:modelValue":a[1]||(a[1]=e=>s.data.gender=e)},null,512),[[c.G2,s.data.gender]]),H]),(0,t._)("div",U,[(0,t.wy)((0,t._)("input",{type:"radio",class:"form-check-input",value:"Female",id:"Female","onUpdate:modelValue":a[2]||(a[2]=e=>s.data.gender=e)},null,512),[[c.G2,s.data.gender]]),q])])]),(0,t._)("div",V,[L,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",placeholder:"請輸入年齡","onUpdate:modelValue":a[3]||(a[3]=e=>s.data.age=e),required:""},null,512),[[c.nr,s.data.age]])]),(0,t._)("div",F,[C,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",placeholder:"請輸入身高/公分","onUpdate:modelValue":a[4]||(a[4]=e=>s.data.height=e),required:""},null,512),[[c.nr,s.data.height]])]),(0,t._)("div",Y,[S,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",placeholder:"請輸入體重/公斤","onUpdate:modelValue":a[5]||(a[5]=e=>s.data.weight=e),required:""},null,512),[[c.nr,s.data.weight]])]),(0,t._)("div",j,[N,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"請輸入與申請人關係","onUpdate:modelValue":a[6]||(a[6]=e=>s.data.relationship=e),required:""},null,512),[[c.nr,s.data.relationship]])]),s.data.abilityToAct?((0,t.wg)(),(0,t.j4)(oe,{key:0,onActType:s.updateActType,onActInput:s.updateActInput,actType_p:s.data.abilityToAct,otherAct_p:s.data.otherAbilityToAct},null,8,["onActType","onActInput","actType_p","otherAct_p"])):(0,t.kq)("",!0)],512)],512),[[c.F8,"page1"==s.showPage]]),s.data.servicePlace?(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",Z,[(0,t._)("form",M,[(0,t._)("div",z,[G,(0,t._)("div",K,[(0,t._)("div",J,[(0,t.wy)((0,t._)("input",{type:"radio",class:"form-check-input",value:"1",id:"live1","onUpdate:modelValue":a[7]||(a[7]=e=>s.data.servicePlace.placeType.id=e)},null,512),[[c.G2,s.data.servicePlace.placeType.id]]),R]),(0,t._)("div",O,[(0,t.wy)((0,t._)("input",{type:"radio",class:"form-check-input",value:"2",id:"live2","onUpdate:modelValue":a[8]||(a[8]=e=>s.data.servicePlace.placeType.id=e)},null,512),[[c.G2,s.data.servicePlace.placeType.id]]),W]),(0,t._)("div",E,[(0,t.wy)((0,t._)("input",{type:"radio",class:"form-check-input",value:"3",id:"live3","onUpdate:modelValue":a[9]||(a[9]=e=>s.data.servicePlace.placeType.id=e)},null,512),[[c.G2,s.data.servicePlace.placeType.id]]),$])]),(0,t.Wm)(ye,{onCityIdx:s.updateCityIdx,onAreaIdx:s.updateAreaIdx,cityIdx_p:s.data.servicePlace.city.id,areaIdx_p:s.data.servicePlace.area.id},null,8,["onCityIdx","onAreaIdx","cityIdx_p","areaIdx_p"])]),(0,t._)("div",B,[1==s.data.servicePlace.placeType.id?((0,t.wg)(),(0,t.iD)("div",Q,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control mt-1",placeholder:"請輸入居家地址","onUpdate:modelValue":a[10]||(a[10]=e=>s.data.servicePlace.place.address=e),required:""},null,512),[[c.nr,s.data.servicePlace.place.address]]),X])):(0,t.kq)("",!0),2==s.data.servicePlace.placeType.id?((0,t.wg)(),(0,t.iD)("div",ee,[(0,t._)("div",ae,[(0,t.wy)((0,t._)("select",{class:"form-control form-select","onUpdate:modelValue":a[11]||(a[11]=e=>s.data.servicePlace.place.id=e),required:""},[le,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.hospitalData,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.properties.id,key:e.properties.id},(0,i.zw)(e.properties.name),9,te)))),128))],512),[[c.bM,s.data.servicePlace.place.id]])])])):(0,t.kq)("",!0),3==s.data.servicePlace.placeType.id?((0,t.wg)(),(0,t.iD)("div",ie,[(0,t._)("div",ce,[(0,t.wy)((0,t._)("select",{class:"form-control form-select","onUpdate:modelValue":a[12]||(a[12]=e=>s.data.servicePlace.place.id=e),required:""},[se,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.sanatoriumData,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.properties.id,key:e.properties.id},(0,i.zw)(e.properties.name),9,ne)))),128))],512),[[c.bM,s.data.servicePlace.place.id]])])])):(0,t.kq)("",!0)])],512)],512)),[[c.F8,"page2"==s.showPage]]):(0,t.kq)("",!0),s.data.checkList?(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",ue,[(0,t.Wm)(me,{onDiseaseData:s.updateDiseaseData,disease_p:s.data.checkList},null,8,["onDiseaseData","disease_p"])],512)),[[c.F8,"page3"==s.showPage]]):(0,t.kq)("",!0)]),(0,t._)("footer",de,[(0,t._)("div",re,[(0,t._)("div",ve,[(0,t._)("div",pe,["page1"==s.showPage?((0,t.wg)(),(0,t.iD)("button",{key:0,class:"btn btn-primary",type:"button",onClick:a[13]||(a[13]=(...e)=>s.save&&s.save(...e))}," 確認並繼續 ")):(0,t.kq)("",!0),"page2"==s.showPage?((0,t.wg)(),(0,t.iD)("button",{key:1,class:"btn btn-primary",type:"button",onClick:a[14]||(a[14]=(...e)=>s.save2&&s.save2(...e))}," 確認並繼續 ")):(0,t.kq)("",!0),"page3"==s.showPage?((0,t.wg)(),(0,t.iD)("button",{key:2,class:"btn btn-primary",type:"button",onClick:a[15]||(a[15]=(...e)=>s.save3&&s.save3(...e))}," 完成新增 ")):(0,t.kq)("",!0)])])])])],64)}l(7658);var ye=l(2262),me=l(2201),_e=l(1557),ke=l(5765),be=l(179),he=(l(697),l(6382)),fe=l(16),we=l(1830),ge=l(4988),Pe=l(8019),Ie={setup(){const e=(0,ge.nN)().urlId,a=`/careRecipient/info/${e}`,l=(0,me.tv)();let i=(0,ye.iH)({}),c=(0,ye.iH)([]),s=(0,ye.iH)([]);i.value.disease=[];let n=(0,ye.iH)(["nav-link active","nav-link","nav-link"]),u=(0,ye.iH)("page1"),d=(0,ye.iH)("基本資料");(0,t.bv)((()=>{(0,Pe.D)()})),(0,t.wF)((async()=>{try{i.value=await(0,we.uT)({id:e}),i.value=i.value.data,2==i.value.servicePlace.placeType.id?(c.value=await(0,we.bc)({cityId:i.value.servicePlace.city.id,areaId:i.value.servicePlace.area.id}),c.value=c.value.data):3==i.value.servicePlace.placeType.id&&(s.value=await(0,we.IJ)({cityId:i.value.servicePlace.city.id.value,areaId:i.value.servicePlace.area.id}),s.value=s.value.data)}catch(a){console.log(a)}}));const r=e=>{i.value.abilityToAct=e.map((e=>parseInt(e)))},v=e=>{i.value.abilityToActOther=e},p=(0,ye.iH)(null),o=e=>{if(e.preventDefault(),p.value.reportValidity()){if(i.value.abilityToAct.length<=0)return void(0,_e.FN)("請填寫行動能力!");u.value="page2",n.value=["nav-link visited","nav-link active","nav-link"],d.value="照顧地點"}},y=(0,ye.iH)(0),m=(0,ye.iH)(0),_=e=>{i.value.servicePlace.city.id=parseInt(e.value),y.value=e.value},k=e=>{i.value.servicePlace.area.id=parseInt(e.value),m.value=e.value};(0,t.YP)((()=>m.value),(async()=>{2==i.value.servicePlace.placeType.id&&(c.value=await(0,we.bc)({cityId:y.value,areaId:m.value}),0==c.value.data.length?((0,_e.FN)("該區域無資料"),c.value=[]):c.value=c.value.data),3==i.value.servicePlace.placeType.id&&(s.value=await(0,we.IJ)({cityId:y.value,areaId:m.value}),0==s.value.data.length?((0,_e.FN)("該區域無資料"),s.value=[]):s.value=s.value.data)})),(0,t.YP)((()=>i.value.servicePlace?.placeType?.id),(async(e,a)=>{a&&(1==i.value.servicePlace.placeType.id&&(i.value.servicePlace.place.address=""),2==i.value.servicePlace.placeType.id&&(y.value=i.value.servicePlace.city.id,m.value=i.value.servicePlace.area.id,c.value=await(0,we.bc)({cityId:y.value,areaId:m.value}),0==c.value.data.length?((0,_e.FN)("該區域無資料"),c.value=[]):c.value=c.value.data),3==i.value.servicePlace.placeType.id&&(y.value=i.value.servicePlace.city.id,m.value=i.value.servicePlace.area.id,s.value=await(0,we.IJ)({cityId:y.value,areaId:m.value}),0==s.value.data.length?((0,_e.FN)("該區域無資料"),s.value=[]):s.value=s.value.data))}));const b=(0,ye.iH)(null),h=e=>{e.preventDefault(),b.value.reportValidity()&&(u.value="page3",n.value=["nav-link visited","nav-link visited","nav-link active"],d.value="病症(複選)")},f=e=>{i.value.checkList=e},w=async()=>{i.value.servicePlace.city.id=y.value,i.value.servicePlace.area.id=m.value,i.value?.abilityToAct[0]?.id&&(i.value.abilityToAct=i.value.abilityToAct.map((e=>parseInt(e.id))));let a=await(0,we.vr)({id:e},i.value);"更新成功"==a.data&&(0,_e.FN)("修改成功"),l.push({path:"/careRecipient/list"})},g=()=>{u.value="page1",n.value=["nav-link active ","nav-link","nav-link"],d.value="基本資料"},P=()=>{u.value="page2",n.value=["nav-link visited ","nav-link active","nav-link"],d.value="照顧地點"};return{stepStyle:n,showPage:u,title:d,save:o,save2:h,save3:w,data:i,backToPage1:g,backToPage2:P,form1:p,form2:b,updateCityIdx:_,updateAreaIdx:k,hospitalData:c,sanatoriumData:s,updateActType:r,updateActInput:v,updateDiseaseData:f,urlLink:a}},components:{Header:ke.Z,CitySelecter:be.Z,ActType:he.Z,DiseaseType:fe.Z}},Te=l(3744);const De=(0,Te.Z)(Ie,[["render",oe],["__scopeId","data-v-444022a4"]]);var Ae=De}}]);
//# sourceMappingURL=2444.10fe0c74.js.map
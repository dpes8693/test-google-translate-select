"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[1841],{1679:function(e,a,t){t.r(a),t.d(a,{default:function(){return ee}});var l=t(6252),s=t(3577),i=t(9963);const o=e=>((0,l.dD)("data-v-640a3a71"),e=e(),(0,l.Cn)(),e),r={class:"orderAdd"},d=o((()=>(0,l._)("div",{class:"title"},[(0,l._)("p",null,"編輯工單")],-1))),u=o((()=>(0,l._)("hr",null,null,-1))),n={class:"mb-3"},c=o((()=>(0,l._)("label",{class:"form-label"},[(0,l.Uk)("被照護者"),(0,l._)("span",{class:"star"},"*")],-1))),v=o((()=>(0,l._)("option",{value:"undefined"},"請選擇被照護者",-1))),p=["value"],m={class:"mb-3"},D=o((()=>(0,l._)("label",{class:"form-label"},[(0,l.Uk)("服務需求"),(0,l._)("span",{class:"star"},"*")],-1))),w=o((()=>(0,l._)("option",{value:"undefined"},"請選擇服務需求",-1))),k=["value"],b={class:"mb-3"},y=o((()=>(0,l._)("label",{class:"form-label"},[(0,l.Uk)("照顧日期"),(0,l._)("span",{class:"star"},"*")],-1))),_={class:"mb-3"},f=o((()=>(0,l._)("label",{class:"form-label"},[(0,l.Uk)("是否為24小時制"),(0,l._)("span",{class:"star"},"*")],-1))),g={class:"input-group"},h={class:"col form-check"},T=o((()=>(0,l._)("label",{class:"form-check-label",for:"yes"},"是",-1))),$={class:"col form-check"},H=o((()=>(0,l._)("label",{class:"form-check-label",for:"no"},"否",-1))),I={class:"mb-3"},L=o((()=>(0,l._)("label",{class:"form-label"},[(0,l.Uk)("照顧時段"),(0,l._)("span",{class:"star"},"*")],-1))),F={key:0,class:"input-group"},U=o((()=>(0,l._)("option",{value:"undefined",disabled:""},"請選擇開始時間",-1))),M=["value"],q=o((()=>(0,l._)("option",{value:"undefined",disabled:""},"請選擇結束時間",-1))),C=["value"],Y={key:1,class:"input-group"},P=o((()=>(0,l._)("option",{value:"undefined",disabled:""},"請選擇開始時間",-1))),R=["value"],V={class:"c-footer"},z={class:"ui-tabbtn"},j={class:"row"},K={class:"col"};function W(e,a,t,o,W,E){const N=(0,l.up)("Header"),Z=(0,l.up)("CalendarModule");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(N,{title:"編輯工單",path:o.urlIdLink},null,8,["path"]),(0,l._)("div",r,[d,u,(0,l._)("div",n,[c,(0,l.wy)((0,l._)("select",{class:"form-control form-select","onUpdate:modelValue":a[0]||(a[0]=e=>o.postData.disabledPersonId=e),required:""},[v,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.careRecipientList,(e=>((0,l.wg)(),(0,l.iD)("option",{key:"A"+e.id,value:e.id},(0,s.zw)(e.name),9,p)))),128))],512),[[i.bM,o.postData.disabledPersonId]])]),(0,l._)("div",m,[D,(0,l.wy)((0,l._)("select",{class:"form-control form-select","onUpdate:modelValue":a[1]||(a[1]=e=>o.postData.serviceId=e),disabled:"",required:""},[w,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.requireList,(e=>((0,l.wg)(),(0,l.iD)("option",{key:"B"+e.id,value:e.id},(0,s.zw)(e.name)+"("+(0,s.zw)(e.createTime)+") ",9,k)))),128))],512),[[i.bM,o.postData.serviceId]])]),(0,l._)("div",b,[y,o.postData.workDate.length>0?((0,l.wg)(),(0,l.j4)(Z,{key:0,onUpdateWorkDate:o.updateWorkDate,date_p:o.postData.workDate},null,8,["onUpdateWorkDate","date_p"])):(0,l.kq)("",!0)]),(0,l._)("div",_,[f,(0,l._)("div",g,[(0,l._)("div",h,[(0,l.wy)((0,l._)("input",{type:"radio",class:"form-check-input",id:"yes",value:"1","onUpdate:modelValue":a[2]||(a[2]=e=>o.postData.isFullDay=e)},null,512),[[i.G2,o.postData.isFullDay]]),T]),(0,l._)("div",$,[(0,l.wy)((0,l._)("input",{type:"radio",class:"form-check-input",id:"no",value:"0","onUpdate:modelValue":a[3]||(a[3]=e=>o.postData.isFullDay=e)},null,512),[[i.G2,o.postData.isFullDay]]),H])])]),(0,l._)("div",I,[L,0==o.postData.isFullDay?((0,l.wg)(),(0,l.iD)("div",F,[(0,l.wy)((0,l._)("select",{class:"col form-control form-select","onUpdate:modelValue":a[4]||(a[4]=e=>o.postData.startTime=e)},[U,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.timeList,(e=>((0,l.wg)(),(0,l.iD)("option",{key:"C"+e.id,value:e.time},(0,s.zw)(e.time),9,M)))),128))],512),[[i.bM,o.postData.startTime]]),(0,l.wy)((0,l._)("select",{class:"col form-control form-select","onUpdate:modelValue":a[5]||(a[5]=e=>o.postData.endTime=e)},[q,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.timeList,(e=>((0,l.wg)(),(0,l.iD)("option",{key:"D"+e.id,value:e.time},(0,s.zw)(e.time),9,C)))),128))],512),[[i.bM,o.postData.endTime]])])):(0,l.kq)("",!0),1==o.postData.isFullDay?((0,l.wg)(),(0,l.iD)("div",Y,[(0,l.wy)((0,l._)("select",{class:"col form-control form-select","onUpdate:modelValue":a[6]||(a[6]=e=>o.postData.startTime=e)},[P,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.timeList,(e=>((0,l.wg)(),(0,l.iD)("option",{key:"C"+e.id,value:e.time},(0,s.zw)(e.time),9,R)))),128))],512),[[i.bM,o.postData.startTime]])])):(0,l.kq)("",!0)])]),(0,l._)("footer",V,[(0,l._)("div",z,[(0,l._)("div",j,[(0,l._)("div",K,[(0,l._)("button",{class:"btn btn-primary",type:"button",onClick:a[7]||(a[7]=(...e)=>o.save&&o.save(...e))},"確定修改")])])])])],64)}t(7658);var E=t(5765),N=t(9295),Z=t(2262),A=t(2201),G=t(1557),B=t(4988),S=t(1830),x=t(4477),J=t(8019),O={setup(){const e=(0,x.dU)(),a=(0,B.nN)().urlId,t=`/order/info/${a}`,s=(0,A.tv)(),i=(0,Z.iH)({isPublic:1,isFullDay:0,disabledPersonId:void 0,serviceId:void 0,workdays:[],workDate:[],startTime:void 0,endTime:void 0,caretakerResumeId:[]});let o=(0,Z.iH)([]),r=(0,Z.iH)([]);const d=(0,Z.iH)([]),u=(0,Z.iH)([]),n=[];(0,B.Cq)(n);let c=[],v={},p=1;(0,l.bv)((async()=>{(0,J.D)(),d.value=await(0,S.t0)({page:1,limit:100}),d.value=d.value.data.data,u.value=await(0,S.qR)({page:1,limit:100}),u.value=u.value.data.data;let e=await(0,S.IR)({id:a});e=e.data,i.value.disabledPersonId=e.disabledPerson.disabledPersonId,i.value.serviceId=e.employerService.id,e.workdays.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),i.value.workDate.push(`${e.start.getFullYear()}-${(0,B.vL)(e.start.getMonth()+1)}-${(0,B.vL)(e.start.getDate())}`)})),e.workdays[0].start.getHours()==e.workdays[0].end.getHours()?(i.value.isFullDay=1,i.value.startTime=`${e.workdays[0].start.getHours()}:${(0,B.vL)(e.workdays[0].start.getMinutes())}`):(i.value.isFullDay=0,i.value.startTime=`${e.workdays[0].start.getHours()}:${(0,B.vL)(e.workdays[0].start.getMinutes())}`,i.value.endTime=`${e.workdays[0].end.getHours()}:${(0,B.vL)(e.workdays[0].end.getMinutes())}`),e.careTakerList.forEach((e=>{i.value.caretakerResumeId.push(e.id)})),await m(),o.value=await(0,S.mq)({page:1,limit:100,isFavorite:1,jobTypeId:p}),o.value=o.value.data.data,r.value=o.value.filter((e=>i.value.caretakerResumeId.includes(e.id)))}));const m=async a=>{void 0==e.jobTypeList?(c=await(0,S.Dr)(),c=c.data.data,e.jobTypeList=c.value):c=e.jobTypeList,v=u.value.filter((e=>e.id==i.value.serviceId)),p=c.filter((e=>e.name==v[0].name)),p=p[0].id},D=e=>{i.value.workDate=e},w=async()=>{0==i.value.isFullDay?i.value.workDate.forEach((e=>{i.value.workdays.push({start:`${e} ${i.value.startTime}:00`,end:`${e} ${i.value.endTime}:00`})})):i.value.workDate.forEach((e=>{let a=new Date(Date.parse(e)+864e5);i.value.workdays.push({start:`${e} ${i.value.startTime}:00`,end:`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()} ${i.value.startTime}:00`})}));let e=await(0,S.H_)({id:a},i.value);if(1==e.status)(0,G.FN)("修改成功"),s.push({path:t});else{let a=(0,B.b$)(e);(0,G.FN)(a)}};return{urlIdLink:t,save:w,careRecipientList:d,requireList:u,postData:i,timeList:n,favData:o,inviteData:r,updateWorkDate:D}},components:{Header:E.Z,CalendarModule:N.Z}},Q=t(3744);const X=(0,Q.Z)(O,[["render",W],["__scopeId","data-v-640a3a71"]]);var ee=X}}]);
//# sourceMappingURL=1841.3fc4ddbc.js.map
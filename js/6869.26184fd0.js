"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[6869],{6186:function(e,t,a){function n(){const e=navigator.userAgent.toLowerCase()||"";let t=navigator.platform.toLowerCase()||"";return t.indexOf("linux")>-1&&e.indexOf("android")>-1&&(t="android"),(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1)&&(t="ios",console.log=function(e){window.webkit.messageHandlers.logger.postMessage(e)}),t}function s(e={}){let t=n()||"";if("android"==t)window.ExtCall.postMessage(e);else{if("ios"!=t)throw new Error(t);window.webkit.messageHandlers.ExtCall.postMessage(e)}}a.d(t,{H6:function(){return u},VU:function(){return d},sX:function(){return i}});const i={openNewWebView:l,replaceSetting:r,goBack:c,toBrowser:o};function l(e=""){const t=JSON.stringify({function:"popWebview",url:e});s(t)}function r(e="",t=""){const a=JSON.stringify({function:"changeProjectSettingURL",userid:e,url:t});s(a)}function o(e=""){const t=JSON.stringify({function:"toBrowser",url:e});s(t)}function c(){const e=JSON.stringify({function:"goBack"});s(e)}const d={lineLogin(e="",t=""){const a=JSON.stringify({function:"lineLogin",channel_id:e,callback:t});s(a)},appleLogin(e=""){const t=JSON.stringify({function:"appleLogin",callback:e});s(t)}},u={startGPS(e=""){const t=JSON.stringify({function:"startGPS",callback:e});s(t)},stopGPS(){const e=JSON.stringify({function:"stopGPS"});s(e)},getCurrentLocation(e=""){const t=JSON.stringify({function:"getCurrentLocation",callback:e});s(t)},getUserLocationHistory(e=""){const t=JSON.stringify({function:"getUserLocationHistory",callback:e});s(t)}}},4988:function(e,t,a){a.d(t,{Cq:function(){return r},Qr:function(){return v},Ux:function(){return c},b$:function(){return l},g7:function(){return p},hB:function(){return f},nN:function(){return o},nV:function(){return g},vL:function(){return u},vW:function(){return h},yv:function(){return y}});a(7658);var n=a(6186),s=a(1830),i=a(4477);const l=e=>"string"==typeof e.message?e.message:"other error",r=e=>{for(let t=0;t<24;t++)e.push({id:t,time:`${t}:00`}),e.push({id:t+1,time:`${t}:30`})},o=()=>{const e=location.href,t=e.split("/"),a=t[t.length-1];return{urlId:a}},c=()=>{const e=location.href,t=e.split("/"),a=t[t.length-2];return{urlId:a}},d=e=>[e.getFullYear(),e.getMonth()+1,e.getDate()],u=e=>e<10?"0"+e:e,v=e=>{let t=JSON.parse(JSON.stringify(e)),a={},n="";return t.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=d(e.start),a[`${e.info[0]}/${e.info[1]}`]?a[`${e.info[0]}/${e.info[1]}`].push(e.info[2]):a[`${e.info[0]}/${e.info[1]}`]=[e.info[2]]})),n=t[0]?.start.getHours()==t[0]?.end.getHours()?`${t[0]?.start.getHours()}:${u(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${u(t[0]?.end.getMinutes())}(24小時)`:`${t[0]?.start.getHours()}:${u(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${u(t[0]?.end.getMinutes())}`,{newDates:t,info:a,time:n}},f=e=>{let t=JSON.parse(JSON.stringify(e)),a={},n="";return t.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=d(e.start),a[`${e.info[0]}/${e.info[1]}`]?a[`${e.info[0]}/${e.info[1]}`].push([e.info[2],e.isDone]):a[`${e.info[0]}/${e.info[1]}`]=[[e.info[2],e.isDone]]})),n=t[0]?.start.getHours()==t[0]?.end.getHours()?"全天(24小時)":`${t[0]?.start.getHours()}:${u(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${u(t[0]?.end.getMinutes())}`,{newDates:t,info:a,time:n}},p=e=>{let t=[],a=[],n={},s=[];return e?.length>0&&e.forEach((e=>t.push(e.split("-")))),t.forEach((e=>{let t=`${e[0]}/${e[1]}`;a.push(t),n[t]?n[t].push(e[2]):n[t]=[e[2]]})),a=a.filter(((e,t)=>a.indexOf(e)===t)),1==a.length&&s.push(`${a?.[0]}/${n?.[a?.[0]]?.join("、")}`),a.length>1&&s.push(`${a?.[1]}/${n?.[a?.[1]]?.join("、")}`),{monthInfo:a,dayInfo:n,dateInfo:s}},g=(e,t)=>{let a={};return t.forEach((t=>{let n=parseInt(t.substring(1,3))-1,s=parseInt(t.substring(3,5))-1,i=parseInt(t.substring(5,7))-1;Object.keys(a).includes(e[n].name)||Object.keys(a).includes(e[n].data[s].name)?a[e[n].data[s].name].push(e[n].data[s].data[i]):a[e[n].data[s].name]=[e[n].data[s].data[i]]})),a},y=()=>{try{window.ExtCallStartGPS=()=>!0,n.H6.startGPS("ExtCallStartGPS")}catch(e){}},h=()=>{const e=(0,i.fG)();if(0==e.userPosition.cityId)try{window.ExtCallGetCurrentLocation=async(t,a,n)=>{if("string"===typeof t&&t?.length>6){const t=await(0,s.MP)({longitude:n,latitude:a});console.log("apiGetPosition已發送/"+t.data.defaultPlace.cityName+"/"+t.data.defaultPlace.townName),e.userPosition.cityId=t.data.defaultPlace.cityId,e.userPosition.areaId=t.data.defaultPlace.areaId,e.userPosition.cityId_2=t.data.longTermCare2Place.cityId,e.userPosition.areaId_2=t.data.longTermCare2Place.areaId,console.log(e.userPosition.cityId+"/"+e.userPosition.areaId+"/"+e.userPosition.cityId_2+"/"+e.userPosition.areaId_2)}},n.H6.getCurrentLocation("ExtCallGetCurrentLocation")}catch(t){console.log("電腦版不支援 extCall GPS")}}},9799:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(6252),s=a(3577);const i=e=>((0,n.dD)("data-v-6d50fb3a"),e=e(),(0,n.Cn)(),e),l={class:"c-header"},r={class:"navbar ui-navbar"},o={class:"navbar-nav"},c=i((()=>(0,n._)("a",{class:"nav-link"},[(0,n._)("i",{class:"fa fa-chevron-left"})],-1))),d=[c],u={class:"navbar-brand"},v={class:"navbar-nav"},f={class:"nav-item"},p={class:"nav-link"};function g(e,t,a,i,c,g){return(0,n.wg)(),(0,n.iD)("header",l,[(0,n._)("nav",r,[(0,n._)("ul",o,[(0,n._)("li",{class:"nav-item",onClick:t[0]||(t[0]=(...e)=>i.backTo&&i.backTo(...e))},d)]),(0,n._)("h1",u,(0,s.zw)(a.title),1),(0,n._)("ul",v,[(0,n._)("li",f,[(0,n._)("a",p,[(0,n._)("i",{class:(0,s.C_)(i.iconCode),onClick:t[1]||(t[1]=(...e)=>i.goto&&i.goto(...e))},[(0,n._)("span",null,(0,s.zw)(i.text),1)],2)])])])])])}a(7658);var y=a(2201),h=a(4477),m={props:{title:String,right:String,path:String,backToPath:String},setup(e){const t=(0,h.s6)(),a=t.goto,n=(0,y.tv)();let s="",i="";const l=e.right?e.right:"";"add"==l&&(s="fa fa-plus",i=" 新增"),"map"==l&&(s="fas fa-map-marker-alt",i=" 地圖"),"text"==l&&(s="far fa-list-ul",i=" 列表"),"search"==l&&(s="far fa-search",i=" 搜尋");const r=()=>{"search"==e.path?console.log("search"):n.push({path:e.path})},o=()=>{if("-1"==e.backToPath)try{a("back")}catch(t){console.log(t),n.back()}else e.backToPath?n.push({path:e.backToPath}):n.push({path:"/home"})};return{iconCode:s,text:i,backTo:o,goto:r}}},b=a(3744);const D=(0,b.Z)(m,[["render",g],["__scopeId","data-v-6d50fb3a"]]);var k=D},6869:function(e,t,a){a.r(t),a.d(t,{default:function(){return Je}});var n=a(6252),s=a(3577);const i=e=>((0,n.dD)("data-v-04159cf0"),e=e(),(0,n.Cn)(),e),l={class:"orderInfo"},r={class:"c-main"},o={class:"detail-container"},c={class:"item-container"},d=i((()=>(0,n._)("div",{class:"item-title"},"照顧日期時段",-1))),u={class:"item-content"},v={key:0,class:"main2"},f=i((()=>(0,n._)("div",{class:"title2"},"服務日期",-1))),p={key:1,class:"main2"},g=i((()=>(0,n._)("div",{class:"title2"},"接受日期",-1))),y={class:"content2"},h={key:2,class:"main2"},m=i((()=>(0,n._)("div",{class:"title2"},"取消日期",-1))),b={class:"content2"},D={key:3,class:"main2"},k=i((()=>(0,n._)("div",{class:"title2"},"服務日期",-1))),_={class:"content2"},w={class:"main2"},P=i((()=>(0,n._)("div",{class:"title2"},"服務時段",-1))),S={class:"content2"},I={class:"main2"},$=i((()=>(0,n._)("div",{class:"title2"},"服務類別",-1))),C={class:"content2"},H={key:0,class:"item-container"},O=i((()=>(0,n._)("div",{class:"item-title item-link collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapse2"},"被照護者資訊",-1))),T={class:"item-content collapse",id:"collapse2"},N={class:"main1"},x=i((()=>(0,n._)("div",{class:"title1"},"名稱",-1))),E={class:"content1"},z={class:"main1"},q=i((()=>(0,n._)("div",{class:"title1"},"性別",-1))),L={class:"content1"},j={class:"main1"},G=i((()=>(0,n._)("div",{class:"title1"},"年齡",-1))),J={class:"content1"},M={class:"main1"},U=i((()=>(0,n._)("div",{class:"title1"},"身高",-1))),A={class:"content1"},F={class:"main1"},W=i((()=>(0,n._)("div",{class:"title1"},"體重",-1))),B={class:"content1"},Y={class:"main1"},Z=i((()=>(0,n._)("div",{class:"title1"},"關係",-1))),K={class:"content1"},V={class:"main2"},Q=i((()=>(0,n._)("div",{class:"title2"},"行動能力",-1))),R={key:0,class:"content2"},X={key:1,class:"content2"},ee={class:"main2"},te=i((()=>(0,n._)("div",{class:"title2"},"照顧地點",-1))),ae={class:"content2"},ne={class:"item-container"},se=i((()=>(0,n._)("div",{class:"item-title item-link collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapse3"},"病症",-1))),ie={class:"item-content collapse",id:"collapse3"},le={class:"title2"},re={class:"content2"},oe={key:1,class:"item-container"},ce=i((()=>(0,n._)("div",{class:"item-title item-link collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapse4"},"服務需求",-1))),de={class:"item-content collapse",id:"collapse4"},ue={class:"content2"},ve={class:"mt-4b btn-container"},fe={key:0,class:"row"},pe={class:"col"},ge={class:"col"},ye={key:1,class:"row"},he=i((()=>(0,n._)("div",{class:"col"},[(0,n._)("button",{class:"btn btn-primary",type:"button"},"等待承接中")],-1))),me=[he],be={key:2,class:"row"},De=i((()=>(0,n._)("div",{class:"col"},[(0,n._)("button",{class:"btn btn-primary",type:"button"},"已拒絕邀約")],-1))),ke=[De],_e={key:3,class:"row"},we=i((()=>(0,n._)("div",{class:"col"},[(0,n._)("button",{class:"btn btn-primary",type:"button"},"執行中")],-1))),Pe=[we];function Se(e,t,a,i,he,De){const we=(0,n.up)("Header"),Se=(0,n.up)("WorkCalendar");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(we,{title:"工單內容",backToPath:"/order/list"}),(0,n._)("div",l,[(0,n._)("section",r,[(0,n._)("div",o,[(0,n._)("div",c,[d,(0,n._)("div",u,[1==i.orderData.replyStatus||0==i.orderData.replyStatus?((0,n.wg)(),(0,n.iD)("div",v,[f,(0,n.Wm)(Se,{onUpdateDay:i.updateDay,onUpdateCancelDay:i.updateCancelDay},null,8,["onUpdateDay","onUpdateCancelDay"])])):(0,n.kq)("",!0),2==i.orderData.replyStatus?((0,n.wg)(),(0,n.iD)("div",p,[g,(0,n._)("div",y,(0,s.zw)(i.orderData?.checkDateInfo.join("、")),1)])):(0,n.kq)("",!0),2==i.orderData.replyStatus?((0,n.wg)(),(0,n.iD)("div",h,[m,(0,n._)("div",b,(0,s.zw)(i.orderData?.cancelDateInfo.join("、")),1)])):(0,n.kq)("",!0),3==i.orderData.replyStatus?((0,n.wg)(),(0,n.iD)("div",D,[k,(0,n._)("div",_,(0,s.zw)(i.orderData?.requireDateInfo.join("、")),1)])):(0,n.kq)("",!0),(0,n._)("div",w,[P,(0,n._)("div",S,(0,s.zw)(i.orderData?.time),1)]),(0,n._)("div",I,[$,(0,n._)("div",C,(0,s.zw)(i.orderData?.employerService?.name),1)])])]),i.orderData?.disabledPerson?((0,n.wg)(),(0,n.iD)("div",H,[O,(0,n._)("div",T,[(0,n._)("div",null,[(0,n._)("div",N,[x,(0,n._)("div",E,(0,s.zw)(i.orderData.disabledPerson.name),1)]),(0,n._)("div",z,[q,(0,n._)("div",L,(0,s.zw)("Female"==i.orderData.disabledPerson.gender?"女性":"男性"),1)]),(0,n._)("div",j,[G,(0,n._)("div",J,(0,s.zw)(i.orderData.disabledPerson.age)+"歲",1)]),(0,n._)("div",M,[U,(0,n._)("div",A,(0,s.zw)(i.orderData.disabledPerson.height)+"公分",1)]),(0,n._)("div",F,[W,(0,n._)("div",B,(0,s.zw)(i.orderData.disabledPerson.weight)+"公斤",1)]),(0,n._)("div",Y,[Z,(0,n._)("div",K,(0,s.zw)(i.orderData.disabledPerson.relationship),1)]),(0,n._)("div",V,[Q,0!=i.orderData?.disabledPerson?.abilityToActInfo?.length?((0,n.wg)(),(0,n.iD)("div",R,(0,s.zw)(i.orderData?.disabledPerson?.abilityToActInfo?.join("、")),1)):(0,n.kq)("",!0),0==i.orderData?.disabledPerson?.abilityToActInfo?.length?((0,n.wg)(),(0,n.iD)("div",X,"無")):(0,n.kq)("",!0)]),(0,n._)("div",ee,[te,(0,n._)("div",ae,(0,s.zw)(i.orderData.disabledPerson.servicePlaceInfo),1)])])])])):(0,n.kq)("",!0),(0,n._)("div",ne,[se,(0,n._)("div",ie,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.orderData?.disabledPerson?.disease,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"main2",key:e.id},[(0,n._)("div",le,(0,s.zw)(e.diseaseName),1),(0,n._)("div",re,(0,s.zw)(e.symptom.join("、")),1)])))),128))])]),i.orderData?.employerService?((0,n.wg)(),(0,n.iD)("div",oe,[ce,(0,n._)("div",de,[(0,n._)("div",ue,(0,s.zw)(i.orderData.employerService?.serviceInfo?.join("、")),1)])])):(0,n.kq)("",!0),(0,n._)("div",ve,[1==i.orderData.replyStatus||0==i.orderData.replyStatus?((0,n.wg)(),(0,n.iD)("div",fe,[(0,n._)("div",pe,[(0,n._)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[0]||(t[0]=(...e)=>i.checkOrder&&i.checkOrder(...e))},"回復邀約")]),(0,n._)("div",ge,[(0,n._)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[1]||(t[1]=(...e)=>i.rejectOrder&&i.rejectOrder(...e))},"拒絕邀約")])])):(0,n.kq)("",!0),2==i.orderData.replyStatus&&2==i.orderData.workOrderStatus?((0,n.wg)(),(0,n.iD)("div",ye,me)):(0,n.kq)("",!0),3==i.orderData.replyStatus?((0,n.wg)(),(0,n.iD)("div",be,ke)):(0,n.kq)("",!0),3==i.orderData.workOrderStatus?((0,n.wg)(),(0,n.iD)("div",_e,Pe)):(0,n.kq)("",!0)])])])])],64)}a(7658);var Ie=a(2262),$e=a(2201),Ce=a(9799);const He={class:"testStyle2"};function Oe(e,t,a,s,i,l){const r=(0,n.up)("v-calendar");return(0,n.wg)(),(0,n.iD)("div",He,[(0,n.Wm)(r,{class:"date-picker","is-expanded":"","from-page":{month:s.month,year:s.year},attributes:s.attrs,onDayclick:s.dayclick},null,8,["from-page","attributes","onDayclick"])])}var Te=a(1830),Ne=a(4988),xe={setup(e,{emit:t}){(0,Ne.Ux)().urlId;const a=(0,Ne.nN)().urlId,s=(0,Ie.iH)({});let i=new Date,l=i.getFullYear(),r=i.getMonth()+1,o=((0,Ie.iH)(),(0,Ie.iH)(""),(0,Ie.iH)(""),(0,Ie.iH)()),c=(0,Ie.iH)(),d=(0,Ie.iH)();(0,Ie.iH)(i);const u=(0,Ie.iH)([{highlight:{style:{background:"#ccc"},contentStyle:{color:"black"}},dates:o},{highlight:{color:"purple",fillMode:"solid",contentClass:"italic"},dates:c}]),v=e=>{c.value.includes(e.id)?c.value=c.value.filter((t=>t!=e.id)):o.value.includes(e.id)&&c.value.push(e.id),d.value=o.value.filter((e=>!c.value.includes(e))),f(c.value,d.value)},f=(e,a)=>{t("updateDay",e),t("updateCancelDay",a)};(0,n.bv)((async()=>{s.value=await(0,Te.KG)({applyId:a}),s.value=s.value.data,o.value=p(s.value.workdays),c.value=o.value,f(c.value,d.value)}));const p=e=>{let t=[];return e.forEach((e=>{t.push(e.start.split(" ")[0])})),t};return{attrs:u,dayclick:v,year:l,month:r}}},Ee=a(3744);const ze=(0,Ee.Z)(xe,[["render",Oe],["__scopeId","data-v-bee5f0b4"]]);var qe=ze,Le=a(1557),je=(a(6455),{setup(){const e=(0,$e.tv)(),t=(0,Ne.Ux)().urlId,a=(0,Ne.nN)().urlId;let s=(0,Ie.iH)([]);const i={workOrderId:t,isConfirm:1,checkTime:[],cancelTime:[],checkDays:[],cancelDays:[]};(0,n.bv)((async()=>{try{s.value=await(0,Te.KG)({applyId:a}),s.value=s.value.data;let e=(0,Ne.Qr)(s.value.workdays);s.value.time=e.time;let t=(0,Ne.g7)(s.value.checkDate);s.value.checkDateInfo=t.dateInfo;let n=(0,Ne.g7)(s.value.cancelDate);s.value.cancelDateInfo=n.dateInfo;let i=(0,Ne.g7)(s.value.requireDate);s.value.requireDateInfo=i.dateInfo,s.value.employerService.languageInfo=[],s.value.employerService.language?.length>0&&s.value.employerService.language.forEach((e=>{s.value.employerService.languageInfo.push(e.name)})),s.value.employerService.licenseInfo=[],s.value.employerService.license?.length>0&&s.value.employerService.license.forEach((e=>{s.value.employerService.licenseInfo.push(e.name)})),s.value.disabledPerson.abilityToActInfo=[],s.value.disabledPerson.abilityToAct?.length>0&&s.value.disabledPerson.abilityToAct.forEach((e=>{s.value.disabledPerson.abilityToActInfo.push(e.name)})),1==s.value.disabledPerson.servicePlace.placeType.id?s.value.disabledPerson.servicePlaceInfo=s.value.disabledPerson.servicePlace.city.name+s.value.disabledPerson.servicePlace.area.name+" "+s.value.disabledPerson.servicePlace.place.address:s.value.disabledPerson.servicePlaceInfo=s.value.disabledPerson.servicePlace.place.name,s.value.employerService.serviceInfo=[],s.value.employerService.service?.length>0&&s.value.employerService.service.forEach((e=>{s.value.employerService.serviceInfo.push(e.name)}))}catch(e){console.log(e)}}));const l=t=>{e.push({path:t})},r=async e=>{i.checkDays=e},o=async e=>{i.cancelDays=e},c=async()=>{let e=s.value.workdays[0].start.split(" ")[1],t=s.value.workdays[0].end.split(" ")[1];e!=t?(i.checkTime=d(i.checkDays,e,t),i.cancelDays&&(i.cancelTime=d(i.cancelDays,e,t))):(i.checkTime=u(i.checkDays,e,t),i.cancelDays&&(i.cancelTime=u(i.cancelDays,e,t)));try{let e=await(0,Te.lT)(i);if(1==e.status)(0,Le.FN)("已回復邀約"),s.value.replyStatus=2;else{let t=(0,Ne.b$)(e);(0,Le.FN)(t)}}catch(a){console.log(a)}},d=(e,t,a)=>{let n=[];return e.forEach((e=>{n.push({start:`${e} ${t}`,end:`${e} ${a}`})})),n},u=(e,t,a)=>{let n=[];return e.forEach((e=>{let s=new Date(Date.parse(e)+864e5);n.push({start:`${e} ${t}`,end:`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()} ${a}`})})),n},v=async()=>{i.isConfirm=0;try{let e=await(0,Te.lT)(i);if(1==e.status)(0,Le.FN)("已拒絕邀約"),s.value.replyStatus=3;else{let t=(0,Ne.b$)(e);(0,Le.FN)(t)}}catch(e){console.log(e)}};return{orderData:s,goto:l,workOrderId:t,updateDay:r,updateCancelDay:o,checkOrder:c,rejectOrder:v}},components:{Header:Ce.Z,WorkCalendar:qe}});const Ge=(0,Ee.Z)(je,[["render",Se],["__scopeId","data-v-04159cf0"]]);var Je=Ge}}]);
//# sourceMappingURL=6869.26184fd0.js.map
"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[7738],{6186:function(e,t,n){function a(){const e=navigator.userAgent.toLowerCase()||"";let t=navigator.platform.toLowerCase()||"";return t.indexOf("linux")>-1&&e.indexOf("android")>-1&&(t="android"),(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1)&&(t="ios",console.log=function(e){window.webkit.messageHandlers.logger.postMessage(e)}),t}function i(e={}){let t=a()||"";if("android"==t)window.ExtCall.postMessage(e);else{if("ios"!=t)throw new Error(t);window.webkit.messageHandlers.ExtCall.postMessage(e)}}n.d(t,{H6:function(){return d},VU:function(){return u},sX:function(){return s}});const s={openNewWebView:c,replaceSetting:l,goBack:r,toBrowser:o};function c(e=""){const t=JSON.stringify({function:"popWebview",url:e});i(t)}function l(e="",t=""){const n=JSON.stringify({function:"changeProjectSettingURL",userid:e,url:t});i(n)}function o(e=""){const t=JSON.stringify({function:"toBrowser",url:e});i(t)}function r(){const e=JSON.stringify({function:"goBack"});i(e)}const u={lineLogin(e="",t=""){const n=JSON.stringify({function:"lineLogin",channel_id:e,callback:t});i(n)},appleLogin(e=""){const t=JSON.stringify({function:"appleLogin",callback:e});i(t)}},d={startGPS(e=""){const t=JSON.stringify({function:"startGPS",callback:e});i(t)},stopGPS(){const e=JSON.stringify({function:"stopGPS"});i(e)},getCurrentLocation(e=""){const t=JSON.stringify({function:"getCurrentLocation",callback:e});i(t)},getUserLocationHistory(e=""){const t=JSON.stringify({function:"getUserLocationHistory",callback:e});i(t)}}},4988:function(e,t,n){n.d(t,{Cq:function(){return l},Qr:function(){return g},Ux:function(){return r},b$:function(){return c},g7:function(){return h},hB:function(){return p},nN:function(){return o},nV:function(){return f},vL:function(){return d},vW:function(){return k},yv:function(){return w}});n(7658);var a=n(6186),i=n(1830),s=n(4477);const c=e=>"string"==typeof e.message?e.message:"other error",l=e=>{for(let t=0;t<24;t++)e.push({id:t,time:`${t}:00`}),e.push({id:t+1,time:`${t}:30`})},o=()=>{const e=location.href,t=e.split("/"),n=t[t.length-1];return{urlId:n}},r=()=>{const e=location.href,t=e.split("/"),n=t[t.length-2];return{urlId:n}},u=e=>[e.getFullYear(),e.getMonth()+1,e.getDate()],d=e=>e<10?"0"+e:e,g=e=>{let t=JSON.parse(JSON.stringify(e)),n={},a="";return t.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=u(e.start),n[`${e.info[0]}/${e.info[1]}`]?n[`${e.info[0]}/${e.info[1]}`].push(e.info[2]):n[`${e.info[0]}/${e.info[1]}`]=[e.info[2]]})),a=t[0]?.start.getHours()==t[0]?.end.getHours()?`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}(24小時)`:`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}`,{newDates:t,info:n,time:a}},p=e=>{let t=JSON.parse(JSON.stringify(e)),n={},a="";return t.forEach((e=>{e.start=new Date(e.start.replace(/-/g,"/")),e.end=new Date(e.end.replace(/-/g,"/")),e.info=u(e.start),n[`${e.info[0]}/${e.info[1]}`]?n[`${e.info[0]}/${e.info[1]}`].push([e.info[2],e.isDone]):n[`${e.info[0]}/${e.info[1]}`]=[[e.info[2],e.isDone]]})),a=t[0]?.start.getHours()==t[0]?.end.getHours()?"全天(24小時)":`${t[0]?.start.getHours()}:${d(t[0]?.start.getMinutes())} ~ ${t[0]?.end.getHours()}:${d(t[0]?.end.getMinutes())}`,{newDates:t,info:n,time:a}},h=e=>{let t=[],n=[],a={},i=[];return e?.length>0&&e.forEach((e=>t.push(e.split("-")))),t.forEach((e=>{let t=`${e[0]}/${e[1]}`;n.push(t),a[t]?a[t].push(e[2]):a[t]=[e[2]]})),n=n.filter(((e,t)=>n.indexOf(e)===t)),1==n.length&&i.push(`${n?.[0]}/${a?.[n?.[0]]?.join("、")}`),n.length>1&&i.push(`${n?.[1]}/${a?.[n?.[1]]?.join("、")}`),{monthInfo:n,dayInfo:a,dateInfo:i}},f=(e,t)=>{let n={};return t.forEach((t=>{let a=parseInt(t.substring(1,3))-1,i=parseInt(t.substring(3,5))-1,s=parseInt(t.substring(5,7))-1;Object.keys(n).includes(e[a].name)||Object.keys(n).includes(e[a].data[i].name)?n[e[a].data[i].name].push(e[a].data[i].data[s]):n[e[a].data[i].name]=[e[a].data[i].data[s]]})),n},w=()=>{try{window.ExtCallStartGPS=()=>!0,a.H6.startGPS("ExtCallStartGPS")}catch(e){}},k=()=>{const e=(0,s.fG)();if(0==e.userPosition.cityId)try{window.ExtCallGetCurrentLocation=async(t,n,a)=>{if("string"===typeof t&&t?.length>6){const t=await(0,i.MP)({longitude:a,latitude:n});console.log("apiGetPosition已發送/"+t.data.defaultPlace.cityName+"/"+t.data.defaultPlace.townName),e.userPosition.cityId=t.data.defaultPlace.cityId,e.userPosition.areaId=t.data.defaultPlace.areaId,e.userPosition.cityId_2=t.data.longTermCare2Place.cityId,e.userPosition.areaId_2=t.data.longTermCare2Place.areaId,console.log(e.userPosition.cityId+"/"+e.userPosition.areaId+"/"+e.userPosition.cityId_2+"/"+e.userPosition.areaId_2)}},a.H6.getCurrentLocation("ExtCallGetCurrentLocation")}catch(t){console.log("電腦版不支援 extCall GPS")}}},1181:function(e,t,n){n.d(t,{Z:function(){return h}});var a=n(6252),i=n.p+"img/nodata.ac65178d.svg";const s=e=>((0,a.dD)("data-v-74e50aab"),e=e(),(0,a.Cn)(),e),c={class:"nodata"},l=s((()=>(0,a._)("img",{src:i,alt:"無資料"},null,-1))),o=s((()=>(0,a._)("p",null,"目前沒有資料",-1))),r=[l,o];function u(e,t){return(0,a.wg)(),(0,a.iD)("div",c,r)}var d=n(3744);const g={},p=(0,d.Z)(g,[["render",u],["__scopeId","data-v-74e50aab"]]);var h=p},7691:function(e,t,n){n.r(t),n.d(t,{default:function(){return fe}});var a=n(6252),i=n(3577);const s=e=>((0,a.dD)("data-v-65b17c93"),e=e(),(0,a.Cn)(),e),c={class:"scheduleList"},l={class:"ScheduleCalendar"},o=s((()=>(0,a._)("div",{class:"calendar-container"},null,-1))),r={key:0,class:"schedule-container"},u={class:"card-body"},d=["onClick"],g={class:"card-title"},p={key:0,class:"card-location"},h={key:1,class:"card-location"},f={class:"card-kind"},w={class:"card-date"},k={class:"card-punch"},y={key:0,class:"notpunch"},v={key:1,class:"notpunch"},m={key:2,class:"makeup"},D={key:3,class:"signin"},b=s((()=>(0,a._)("br",null,null,-1))),T={key:4,class:"notpunch"},$={key:5,class:"notpunch"},I={key:6,class:"makeup"},O={key:7,class:"signout"},P={class:"card-state"},S={key:0,href:"schedule-detail.html",class:"btn btn-notwork"},_={key:1,href:"schedule-detail.html",class:"btn btn-notwork"},q={key:2,href:"schedule-detail.html",class:"btn btn-completed"},z={key:3,href:"schedule-detail.html",class:"btn btn-completed"},C={key:1,class:"schedule-container"},H={class:"card-body"},L=["onClick"],N={class:"card-title"},M={key:0,class:"card-location"},x={key:1,class:"card-location"},E={class:"card-kind"},J={class:"card-date"},U={class:"card-punch"},G={key:0,class:"notpunch"},Y={key:1,class:"notpunch"},j={key:2,class:"makeup"},F={key:3,class:"signin"},B=s((()=>(0,a._)("br",null,null,-1))),W={key:4,class:"notpunch"},Z={key:5,class:"notpunch"},V={key:6,class:"makeup"},K={key:7,class:"signout"},A={class:"card-state"},Q={key:0,href:"schedule-detail.html",class:"btn btn-notwork"},R={key:1,href:"schedule-detail.html",class:"btn btn-notwork"},X={key:2,href:"schedule-detail.html",class:"btn btn-completed"},ee={key:3,href:"schedule-detail.html",class:"btn btn-completed"};function te(e,t,n,s,te,ne){const ae=(0,a.up)("ScheduleCalendar"),ie=(0,a.up)("NoData");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",l,[(0,a.Wm)(ae,{onUpdateDay:s.updateDay,date_p:s.dateList},null,8,["onUpdateDay","date_p"])]),o,"purple"==s.mode?((0,a.wg)(),(0,a.iD)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.todayOrder,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"card",key:e.scheduleId},[(0,a._)("div",u,[(0,a._)("a",{onClick:t=>s.goto(`/schedule/info/${e.scheduleId}`),class:"card-link"},[(0,a._)("div",g,(0,i.zw)(e.name)+"("+(0,i.zw)("Male"==e.gender?"男性":"女性")+"/"+(0,i.zw)(e.age)+"歲/"+(0,i.zw)(e.height)+"cm/"+(0,i.zw)(e.weight)+"kg)",1),1==e.servicePlace.placeType.id?((0,a.wg)(),(0,a.iD)("div",p,"照顧地點: "+(0,i.zw)(e.servicePlace.city.name)+(0,i.zw)(e.servicePlace.city.area)+(0,i.zw)(e.servicePlace.place.address),1)):(0,a.kq)("",!0),1!=e.servicePlace.placeType.id?((0,a.wg)(),(0,a.iD)("div",h,"照顧地點: "+(0,i.zw)(e.servicePlace.place.name),1)):(0,a.kq)("",!0),(0,a._)("div",f,"履歷身分: "+(0,i.zw)(e.serviceName),1),(0,a._)("div",w,"日期時段: "+(0,i.zw)(e.startTime.substring(0,e.startTime.length-3))+" ~ "+(0,i.zw)(e.endTime.substring(0,e.endTime.length-3).split(" ")[1]),1),(0,a._)("div",k,[(0,a.Uk)(" 打卡簽到: "),0==e.punchInType||2==e.punchInType?((0,a.wg)(),(0,a.iD)("span",y,"未打卡")):(0,a.kq)("",!0),1==e.punchInType?((0,a.wg)(),(0,a.iD)("span",v,(0,i.zw)(e.punchInTime),1)):(0,a.kq)("",!0),3==e.punchInType?((0,a.wg)(),(0,a.iD)("span",m,"補")):(0,a.kq)("",!0),3==e.punchInType?((0,a.wg)(),(0,a.iD)("span",D,(0,i.zw)(e.punchInTime),1)):(0,a.kq)("",!0),b,(0,a.Uk)(" 打卡簽退: "),0==e.punchOutType||2==e.punchOutType?((0,a.wg)(),(0,a.iD)("span",T,"未打卡")):(0,a.kq)("",!0),1==e.punchOutType?((0,a.wg)(),(0,a.iD)("span",$,(0,i.zw)(e.punchOutTime),1)):(0,a.kq)("",!0),3==e.punchOutType?((0,a.wg)(),(0,a.iD)("span",I,"補")):(0,a.kq)("",!0),3==e.punchOutType?((0,a.wg)(),(0,a.iD)("span",O,(0,i.zw)(e.punchOutTime),1)):(0,a.kq)("",!0)])],8,d),(0,a._)("div",P,[2==e.workingStatus?((0,a.wg)(),(0,a.iD)("a",S,"未到班")):(0,a.kq)("",!0),4==e.workingStatus?((0,a.wg)(),(0,a.iD)("a",_,"中斷")):(0,a.kq)("",!0),1==e.workingStatus?((0,a.wg)(),(0,a.iD)("a",q,"已完工")):(0,a.kq)("",!0),3==e.workingStatus?((0,a.wg)(),(0,a.iD)("a",z,"待確認完工")):(0,a.kq)("",!0)])])])))),128)),0==s.todayOrder?.length?((0,a.wg)(),(0,a.j4)(ie,{key:0})):(0,a.kq)("",!0)])):(0,a.kq)("",!0),"pink"==s.mode?((0,a.wg)(),(0,a.iD)("div",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.todayOrder,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"card",key:e.scheduleId},[(0,a._)("div",H,[(0,a._)("a",{onClick:t=>s.goto(`/schedule/info/${e.scheduleId}`),class:"card-link"},[(0,a._)("div",N,(0,i.zw)(e.name)+"("+(0,i.zw)("Male"==e.gender?"男性":"女性")+"/"+(0,i.zw)(e.age)+"歲/"+(0,i.zw)(e.height)+"cm/"+(0,i.zw)(e.weight)+"kg)",1),1==e.servicePlace.placeType.id?((0,a.wg)(),(0,a.iD)("div",M,"照顧地點: "+(0,i.zw)(e.servicePlace.city.name)+(0,i.zw)(e.servicePlace.city.area)+(0,i.zw)(e.servicePlace.place.address),1)):(0,a.kq)("",!0),1!=e.servicePlace.placeType.id?((0,a.wg)(),(0,a.iD)("div",x,"照顧地點: "+(0,i.zw)(e.servicePlace.place.name),1)):(0,a.kq)("",!0),(0,a._)("div",E,"履歷身分: "+(0,i.zw)(e.serviceName),1),(0,a._)("div",J,"日期時段: "+(0,i.zw)(e.startTime.substring(0,e.startTime.length-3))+" ~ "+(0,i.zw)(e.endTime.substring(0,e.endTime.length-3).split(" ")[1]),1),(0,a._)("div",U,[(0,a.Uk)(" 打卡簽到: "),0==e.punchInType||2==e.punchInType?((0,a.wg)(),(0,a.iD)("span",G,"未打卡")):(0,a.kq)("",!0),1==e.punchInType?((0,a.wg)(),(0,a.iD)("span",Y,(0,i.zw)(e.punchInTime),1)):(0,a.kq)("",!0),3==e.punchInType?((0,a.wg)(),(0,a.iD)("span",j,"補")):(0,a.kq)("",!0),3==e.punchInType?((0,a.wg)(),(0,a.iD)("span",F,(0,i.zw)(e.punchInTime),1)):(0,a.kq)("",!0),B,(0,a.Uk)(" 打卡簽退: "),0==e.punchOutType||2==e.punchOutType?((0,a.wg)(),(0,a.iD)("span",W,"未打卡")):(0,a.kq)("",!0),1==e.punchOutType?((0,a.wg)(),(0,a.iD)("span",Z,(0,i.zw)(e.punchOutTime),1)):(0,a.kq)("",!0),3==e.punchOutType?((0,a.wg)(),(0,a.iD)("span",V,"補")):(0,a.kq)("",!0),3==e.punchOutType?((0,a.wg)(),(0,a.iD)("span",K,(0,i.zw)(e.punchOutTime),1)):(0,a.kq)("",!0)])],8,L),(0,a._)("div",A,[2==e.workingStatus?((0,a.wg)(),(0,a.iD)("a",Q,"未到班")):(0,a.kq)("",!0),4==e.workingStatus?((0,a.wg)(),(0,a.iD)("a",R,"中斷")):(0,a.kq)("",!0),1==e.workingStatus?((0,a.wg)(),(0,a.iD)("a",X,"已完工")):(0,a.kq)("",!0),3==e.workingStatus?((0,a.wg)(),(0,a.iD)("a",ee,"待確認完工")):(0,a.kq)("",!0)])])])))),128)),0==s.todayOrder?.length?((0,a.wg)(),(0,a.j4)(ie,{key:0})):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])}n(7658);var ne=n(2262);const ae={class:"testStyle2"};function ie(e,t,n,i,s,c){const l=(0,a.up)("v-calendar");return(0,a.wg)(),(0,a.iD)("div",ae,[(0,a.Wm)(l,{class:"date-picker","is-expanded":"","from-page":{month:i.month,year:i.year},attributes:i.attrs,onDayclick:i.dayclick,"onUpdate:toPage":i.pageChange},null,8,["from-page","attributes","onDayclick","onUpdate:toPage"])])}var se=n(1830),ce=n(4988),le={setup(e,{emit:t}){let n=new Date,a=n.getFullYear(),i=n.getMonth()+1,s=(0,ne.iH)(),c=(0,ne.iH)(""),l=(0,ne.iH)(""),o=(0,ne.iH)(),r=(0,ne.iH)(n);const u=(0,ne.iH)([{highlight:{color:"pink",fillMode:"light"},dates:o},{highlight:{color:"blue",fillMode:"light"},dates:n},{highlight:{color:"pink",fillMode:"solid",contentClass:"italic"},dates:r}]),d=e=>{r.value=e.id,p(e)},g=async e=>{c.value=`${e?.year}/${e?.month}/1`,c.value=new Date(c.value.replace(/-/g,"/")),l.value=new Date(c.value.getFullYear(),c.value.getMonth()+1,0),c.value=`${c.value.getFullYear()}/${(0,ce.vL)(c.value.getMonth()+1)}/${(0,ce.vL)(c.value.getDate())}`,l.value=`${l.value.getFullYear()}/${(0,ce.vL)(l.value.getMonth()+1)}/${(0,ce.vL)(l.value.getDate())}`,await h(),o.value=f(s.value),console.log(o.value)},p=e=>{t("updateDay",e)},h=async()=>{try{s.value=await(0,se.Eq)({start:c.value,end:l.value}),s.value=s.value.data}catch(e){console.log(e)}},f=e=>{let t=[];return e.fullDay.length>0&&e.fullDay.forEach((e=>{t=t.concat(e)})),e.partTime.length>0&&(t=t.concat(e.partTime)),t=t.filter(((e,n)=>t.indexOf(e)===n)),t};return{attrs:u,dayclick:d,year:a,month:i,pageChange:g}}},oe=n(3744);const re=(0,oe.Z)(le,[["render",ie],["__scopeId","data-v-9656398c"]]);var ue=re,de=n(1181),ge=n(2201),pe={setup(){const e=(0,ge.tv)();let t=(0,ne.iH)("purple"),n=(0,ne.iH)(),i=((0,ne.iH)(""),(0,ne.iH)(""),(0,ne.iH)()),s=(0,ne.iH)();(0,a.bv)((async()=>{try{let e=new Date;e=`${e.getFullYear()}/${(0,ce.vL)(e.getMonth()+1)}/${(0,ce.vL)(e.getDate())}`,t.value="pink",s.value=await(0,se.eT)({scheduleDate:e}),s.value=s.value.data}catch(e){console.log(e)}}));const c=async e=>{s.value=await(0,se.eT)({scheduleDate:e.id.replace(/-/g,"/")}),s.value=s.value.data},l=t=>{e.push({path:t})};return{mode:t,updateDay:c,scheduleList:n,dateList:i,todayOrder:s,goto:l}},components:{ScheduleCalendar:ue,NoData:de.Z}};const he=(0,oe.Z)(pe,[["render",te],["__scopeId","data-v-65b17c93"]]);var fe=he}}]);
//# sourceMappingURL=7738.75ea788e.js.map
"use strict";(self["webpackChunknubk_cli"]=self["webpackChunknubk_cli"]||[]).push([[9065],{622:function(t,e,n){n.d(e,{o:function(){return i}});var o=n(2262),s=n(9876);const a={setItem(t,e){localStorage.setItem(t,e)},getItem(t){const e=localStorage.getItem(t)||"";return e}},i=(0,s.Q_)("smsCoolDown",(()=>{let t=(0,o.iH)(""),e=null,n=(0,o.iH)(!0);const s=60;function i(){a.setItem("smsSendDate",new Date)}function r(){a.setItem("currentTime",new Date)}function l(){clearInterval(e)}function u(){const{before:t,after:e}=d();return Math.floor((e-t)/1e3)}function c(){let t=a.getItem("smsSendDate");t||a.setItem("smsSendDate",new Date("2000/01/01")),r()}function d(){let t=a.getItem("smsSendDate"),e=a.getItem("currentTime");return{after:new Date(e).getTime(),before:new Date(t).getTime()}}function f(){l(),n.value=!0,t.value=""}function w(){return 60-t.value<60&&60-t.value>=0?60-t.value:""}function p(){!0===n.value&&(e=setInterval((()=>{u()>=s?(t.value="",n.value=!0,l()):(r(),t.value=u(),n.value=!1)}),1e3))}return{setCountDown:p,showText:w,isSmsCoolDownOk:n,smsSendDate:i,handleRouterLeave:f,init:c}}))},6186:function(t,e,n){function o(){const t=navigator.userAgent.toLowerCase()||"";let e=navigator.platform.toLowerCase()||"";return e.indexOf("linux")>-1&&t.indexOf("android")>-1&&(e="android"),(e.indexOf("iphone")>-1||e.indexOf("ipad")>-1)&&(e="ios",console.log=function(t){window.webkit.messageHandlers.logger.postMessage(t)}),e}function s(t={}){let e=o()||"";if("android"==e)window.ExtCall.postMessage(t);else{if("ios"!=e)throw new Error(e);window.webkit.messageHandlers.ExtCall.postMessage(t)}}n.d(e,{H6:function(){return d},VU:function(){return c},sX:function(){return a}});const a={openNewWebView:i,replaceSetting:r,goBack:u,toBrowser:l};function i(t=""){const e=JSON.stringify({function:"popWebview",url:t});s(e)}function r(t="",e=""){const n=JSON.stringify({function:"changeProjectSettingURL",userid:t,url:e});s(n)}function l(t=""){const e=JSON.stringify({function:"toBrowser",url:t});s(e)}function u(){const t=JSON.stringify({function:"goBack"});s(t)}const c={lineLogin(t="",e=""){const n=JSON.stringify({function:"lineLogin",channel_id:t,callback:e});s(n)},appleLogin(t=""){const e=JSON.stringify({function:"appleLogin",callback:t});s(e)}},d={startGPS(t=""){const e=JSON.stringify({function:"startGPS",callback:t});s(e)},stopGPS(){const t=JSON.stringify({function:"stopGPS"});s(t)},getCurrentLocation(t=""){const e=JSON.stringify({function:"getCurrentLocation",callback:t});s(e)},getUserLocationHistory(t=""){const e=JSON.stringify({function:"getUserLocationHistory",callback:t});s(e)}}},8019:function(t,e,n){n.d(e,{D:function(){return o}});const o=()=>{const t="input:not(input[type = checkbox], input[type = radio], input[type = file], input[readonly], input[disabled])",e=document.querySelectorAll(t);e.forEach((t=>{t.addEventListener("focus",(()=>{document.body.classList.add("fixfixed")})),t.addEventListener("blur",(()=>{document.body.classList.remove("fixfixed")}))}))}},4988:function(t,e,n){n.d(e,{Cq:function(){return r},Qr:function(){return f},Ux:function(){return u},b$:function(){return i},g7:function(){return p},hB:function(){return w},nN:function(){return l},nV:function(){return g},vL:function(){return d},vW:function(){return h},yv:function(){return y}});n(7658);var o=n(6186),s=n(1830),a=n(4477);const i=t=>"string"==typeof t.message?t.message:"other error",r=t=>{for(let e=0;e<24;e++)t.push({id:e,time:`${e}:00`}),t.push({id:e+1,time:`${e}:30`})},l=()=>{const t=location.href,e=t.split("/"),n=e[e.length-1];return{urlId:n}},u=()=>{const t=location.href,e=t.split("/"),n=e[e.length-2];return{urlId:n}},c=t=>[t.getFullYear(),t.getMonth()+1,t.getDate()],d=t=>t<10?"0"+t:t,f=t=>{let e=JSON.parse(JSON.stringify(t)),n={},o="";return e.forEach((t=>{t.start=new Date(t.start.replace(/-/g,"/")),t.end=new Date(t.end.replace(/-/g,"/")),t.info=c(t.start),n[`${t.info[0]}/${t.info[1]}`]?n[`${t.info[0]}/${t.info[1]}`].push(t.info[2]):n[`${t.info[0]}/${t.info[1]}`]=[t.info[2]]})),o=e[0]?.start.getHours()==e[0]?.end.getHours()?`${e[0]?.start.getHours()}:${d(e[0]?.start.getMinutes())} ~ ${e[0]?.end.getHours()}:${d(e[0]?.end.getMinutes())}(24小時)`:`${e[0]?.start.getHours()}:${d(e[0]?.start.getMinutes())} ~ ${e[0]?.end.getHours()}:${d(e[0]?.end.getMinutes())}`,{newDates:e,info:n,time:o}},w=t=>{let e=JSON.parse(JSON.stringify(t)),n={},o="";return e.forEach((t=>{t.start=new Date(t.start.replace(/-/g,"/")),t.end=new Date(t.end.replace(/-/g,"/")),t.info=c(t.start),n[`${t.info[0]}/${t.info[1]}`]?n[`${t.info[0]}/${t.info[1]}`].push([t.info[2],t.isDone]):n[`${t.info[0]}/${t.info[1]}`]=[[t.info[2],t.isDone]]})),o=e[0]?.start.getHours()==e[0]?.end.getHours()?"全天(24小時)":`${e[0]?.start.getHours()}:${d(e[0]?.start.getMinutes())} ~ ${e[0]?.end.getHours()}:${d(e[0]?.end.getMinutes())}`,{newDates:e,info:n,time:o}},p=t=>{let e=[],n=[],o={},s=[];return t?.length>0&&t.forEach((t=>e.push(t.split("-")))),e.forEach((t=>{let e=`${t[0]}/${t[1]}`;n.push(e),o[e]?o[e].push(t[2]):o[e]=[t[2]]})),n=n.filter(((t,e)=>n.indexOf(t)===e)),1==n.length&&s.push(`${n?.[0]}/${o?.[n?.[0]]?.join("、")}`),n.length>1&&s.push(`${n?.[1]}/${o?.[n?.[1]]?.join("、")}`),{monthInfo:n,dayInfo:o,dateInfo:s}},g=(t,e)=>{let n={};return e.forEach((e=>{let o=parseInt(e.substring(1,3))-1,s=parseInt(e.substring(3,5))-1,a=parseInt(e.substring(5,7))-1;Object.keys(n).includes(t[o].name)||Object.keys(n).includes(t[o].data[s].name)?n[t[o].data[s].name].push(t[o].data[s].data[a]):n[t[o].data[s].name]=[t[o].data[s].data[a]]})),n},y=()=>{try{window.ExtCallStartGPS=()=>!0,o.H6.startGPS("ExtCallStartGPS")}catch(t){}},h=()=>{const t=(0,a.fG)();if(0==t.userPosition.cityId)try{window.ExtCallGetCurrentLocation=async(e,n,o)=>{if("string"===typeof e&&e?.length>6){const e=await(0,s.MP)({longitude:o,latitude:n});console.log("apiGetPosition已發送/"+e.data.defaultPlace.cityName+"/"+e.data.defaultPlace.townName),t.userPosition.cityId=e.data.defaultPlace.cityId,t.userPosition.areaId=e.data.defaultPlace.areaId,t.userPosition.cityId_2=e.data.longTermCare2Place.cityId,t.userPosition.areaId_2=e.data.longTermCare2Place.areaId,console.log(t.userPosition.cityId+"/"+t.userPosition.areaId+"/"+t.userPosition.cityId_2+"/"+t.userPosition.areaId_2)}},o.H6.getCurrentLocation("ExtCallGetCurrentLocation")}catch(e){console.log("電腦版不支援 extCall GPS")}}},9065:function(t,e,n){n.r(e),n.d(e,{default:function(){return Q}});n(7658);var o=n(6252),s=n(9963),a=n(3577);const i=t=>((0,o.dD)("data-v-cf563ff2"),t=t(),(0,o.Cn)(),t),r={class:"fullScreen"},l={class:"forget"},u=i((()=>(0,o._)("div",null,null,-1))),c=i((()=>(0,o._)("div",{class:"title"},"忘記密碼",-1))),d={class:"main"},f={ref:"form"},w={class:"mb-3"},p={key:0,class:"mb-3"},g={ref:"form2"},y={key:0,class:"mb-3 passwordArea"},h={key:0},m=i((()=>(0,o._)("i",{class:"far fa-eye"},null,-1))),v=[m],k={key:1},b=i((()=>(0,o._)("i",{class:"far fa-eye-slash"},null,-1))),S=[b],P={key:1,class:"mb-3 passwordArea"},D={key:0},$=i((()=>(0,o._)("i",{class:"far fa-eye"},null,-1))),_=[$],C={key:1},I=i((()=>(0,o._)("i",{class:"far fa-eye-slash"},null,-1))),x=[I],N={class:"mt-4b btn-container"},H={class:"row"},O={key:0,class:"col"},V={key:1,class:"col"},L={key:2,class:"col"},q={key:0,class:"btn btn-primary",type:"button",style:{"background-color":"#BFBFBF",border:"0px"}},E={class:"login-main2"},J=i((()=>(0,o._)("div",null,".",-1)));function G(t,e,n,i,m,b){return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",l,[u,c,(0,o._)("div",d,[(0,o._)("form",f,[(0,o._)("div",w,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入手機號碼","onUpdate:modelValue":e[0]||(e[0]=t=>i.inputData.phoneNumber=t),pattern:"^09\\d{2}?\\d{3}?\\d{3}$",title:"請輸入手機號碼",required:""},null,512),[[s.nr,i.inputData.phoneNumber]])])],512),i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入驗證碼","onUpdate:modelValue":e[1]||(e[1]=t=>i.inputData.verifyCode=t)},null,512),[[s.nr,i.inputData.verifyCode]])])):(0,o.kq)("",!0),(0,o._)("form",g,[i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",y,[0==i.isShowPassword?((0,o.wg)(),(0,o.iD)("div",h,[(0,o.wy)((0,o._)("input",{type:"password",class:"form-control",placeholder:"請輸入新密碼","onUpdate:modelValue":e[2]||(e[2]=t=>i.inputData.newPassword=t),pattern:"^(?=.*[A-Za-z])(?=.*[0-9]).{6,}$",title:"最少6個字元，需有英文及數字"},null,512),[[s.nr,i.inputData.newPassword]]),(0,o._)("a",{class:"nav-link",onClick:e[3]||(e[3]=(...t)=>i.showPassword&&i.showPassword(...t))},v)])):(0,o.kq)("",!0),1==i.isShowPassword?((0,o.wg)(),(0,o.iD)("div",k,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請輸入新密碼","onUpdate:modelValue":e[4]||(e[4]=t=>i.inputData.newPassword=t),pattern:"^(?=.*[A-Za-z])(?=.*[0-9]).{6,}$",title:"最少6個字元，需有英文及數字"},null,512),[[s.nr,i.inputData.newPassword]]),(0,o._)("a",{class:"nav-link",onClick:e[5]||(e[5]=(...t)=>i.showPassword&&i.showPassword(...t))},S)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)],512),i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",P,[0==i.isShowPassword2?((0,o.wg)(),(0,o.iD)("div",D,[(0,o.wy)((0,o._)("input",{type:"password",class:"form-control",placeholder:"請再次確認新密碼","onUpdate:modelValue":e[6]||(e[6]=t=>i.newPassword2=t)},null,512),[[s.nr,i.newPassword2]]),(0,o._)("a",{class:"nav-link",onClick:e[7]||(e[7]=(...t)=>i.showPassword2&&i.showPassword2(...t))},_)])):(0,o.kq)("",!0),1==i.isShowPassword2?((0,o.wg)(),(0,o.iD)("div",C,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"請再次確認新密碼","onUpdate:modelValue":e[8]||(e[8]=t=>i.newPassword2=t)},null,512),[[s.nr,i.newPassword2]]),(0,o._)("a",{class:"nav-link",onClick:e[9]||(e[9]=(...t)=>i.showPassword2&&i.showPassword2(...t))},x)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])]),(0,o._)("div",N,[(0,o._)("div",H,[i.isSendVerify?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("button",{class:"btn btn-primary",type:"button",onClick:e[10]||(e[10]=t=>i.sendVerify(t))},"發送驗證碼")])),i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("button",{class:"btn btn-primary",type:"button",onClick:e[11]||(e[11]=t=>i.send(t))},"送出")])):(0,o.kq)("",!0),i.isSendVerify?((0,o.wg)(),(0,o.iD)("div",L,[i.showSendOtpBtn?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",q,(0,a.zw)(`請稍後${i.showText()}秒`),1)),i.showSendOtpBtn?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn btn-primary",type:"button",onClick:e[12]||(e[12]=t=>i.sendVerify2(t))},"重新發送")):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])]),(0,o._)("div",E,[(0,o._)("div",{onClick:e[13]||(e[13]=e=>t.$router.push({path:"/home"}))},"訪客登入"),J,(0,o._)("div",{onClick:e[14]||(e[14]=e=>t.$router.push({path:"/"}))},"回登入頁")])])}var M=n(2262),B=n(2201),U=n(1557),F=n(4988),T=n(1830),A=n(622),j=n(9876),z=n(8019),R={setup(){const t=(0,A.o)(),{showText:e,setCountDown:n,smsSendDate:s,handleRouterLeave:a,init:i}=t,{isSmsCoolDownOk:r}=(0,j.Jk)(t),l=(0,o.Fl)((()=>!e())),u=async()=>{if(!1!==r.value){const t=await(0,T.mP)({phoneNumber:d.value.phoneNumber});if(1==t.status)(0,U.FN)("驗證碼已發送"),s(),n(),f.value=!0;else{let e=(0,F.b$)(t);(0,U.FN)(e)}}else alert("簡訊功能冷卻中")};(0,o.bv)((()=>{(0,z.D)(),i(),n()})),(0,B.iS)(((t,e,n)=>{a(),n()}));const c=(0,B.tv)(),d=(0,M.iH)({verifyCode:"",phoneNumber:"",newPassword:""}),f=(0,M.iH)(!1),w=(0,M.iH)(""),p=(0,M.iH)(null),g=(0,M.iH)(null);let y={};const h=async t=>{t.preventDefault(),p.value.reportValidity()&&u()},m=async t=>{t.preventDefault(),p.value.reportValidity()&&u()},v=async t=>{if(t.preventDefault(),g.value.reportValidity())if(d.value.newPassword==w.value)if(y=await(0,T.AC)(d.value),1==y.status)(0,U.FN)("密碼已修改，請使用新密碼登入"),c.push({path:"/"});else{let t=(0,F.b$)(y);(0,U.FN)(t)}else(0,U.FN)("密碼不相符，請確認")};let k=(0,M.iH)(0);const b=t=>{k.value=0==k.value?1:0};let S=(0,M.iH)(0);const P=t=>{S.value=0==S.value?1:0};return{showText:e,showSendOtpBtn:l,form:p,form2:g,newPassword2:w,send:v,sendVerify:h,sendVerify2:m,isSendVerify:f,inputData:d,isShowPassword:k,showPassword:b,isShowPassword2:S,showPassword2:P}}},W=n(3744);const Z=(0,W.Z)(R,[["render",G],["__scopeId","data-v-cf563ff2"]]);var Q=Z}}]);
//# sourceMappingURL=9065.dbae1a6e.js.map